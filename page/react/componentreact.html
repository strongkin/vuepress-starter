<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>学习目标 | TS文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="TS文档翻译">
    
    <link rel="preload" href="/vuepress-starter/assets/css/0.styles.d7e25954.css" as="style"><link rel="preload" href="/vuepress-starter/assets/js/app.4a327c45.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/6.a1faa4b0.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/38.ca98925e.js" as="script"><link rel="prefetch" href="/vuepress-starter/assets/js/10.f5903720.js"><link rel="prefetch" href="/vuepress-starter/assets/js/11.b77b02e4.js"><link rel="prefetch" href="/vuepress-starter/assets/js/12.f378223c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/13.3d245960.js"><link rel="prefetch" href="/vuepress-starter/assets/js/14.49a892d6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/15.0b1b0383.js"><link rel="prefetch" href="/vuepress-starter/assets/js/16.d06a030d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/17.84d27388.js"><link rel="prefetch" href="/vuepress-starter/assets/js/18.c13afe97.js"><link rel="prefetch" href="/vuepress-starter/assets/js/19.b289bc96.js"><link rel="prefetch" href="/vuepress-starter/assets/js/2.42218236.js"><link rel="prefetch" href="/vuepress-starter/assets/js/20.b402960b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/21.6b0d51cf.js"><link rel="prefetch" href="/vuepress-starter/assets/js/22.e5e99c72.js"><link rel="prefetch" href="/vuepress-starter/assets/js/23.0dacdabb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/24.bddde9d0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/25.35825baf.js"><link rel="prefetch" href="/vuepress-starter/assets/js/26.4fd03b2a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/27.1235ad8a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/28.4dbc545a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/29.33bb3d63.js"><link rel="prefetch" href="/vuepress-starter/assets/js/3.4c24884e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/30.1957df88.js"><link rel="prefetch" href="/vuepress-starter/assets/js/31.c2ee7a07.js"><link rel="prefetch" href="/vuepress-starter/assets/js/32.2f7bda2b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/33.bfec5ef5.js"><link rel="prefetch" href="/vuepress-starter/assets/js/34.9445951a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/35.8eb2f8f7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/36.7caa0b1b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/37.9b5c3210.js"><link rel="prefetch" href="/vuepress-starter/assets/js/39.deb93f4a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/4.60138221.js"><link rel="prefetch" href="/vuepress-starter/assets/js/40.e17db95e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/41.5270091e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/42.0b10cfe3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/43.d7cd6c6a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/44.1cf33892.js"><link rel="prefetch" href="/vuepress-starter/assets/js/45.5468f19b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/46.5e6a10cd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/47.4d55d23d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/48.2bdfdd79.js"><link rel="prefetch" href="/vuepress-starter/assets/js/49.f488f56b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/5.5662c276.js"><link rel="prefetch" href="/vuepress-starter/assets/js/50.e40e1424.js"><link rel="prefetch" href="/vuepress-starter/assets/js/51.b76b2cac.js"><link rel="prefetch" href="/vuepress-starter/assets/js/52.6c708f3e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/53.b205ce08.js"><link rel="prefetch" href="/vuepress-starter/assets/js/54.39782ae0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/55.d9d2f774.js"><link rel="prefetch" href="/vuepress-starter/assets/js/56.86f8285d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/57.f81bae39.js"><link rel="prefetch" href="/vuepress-starter/assets/js/58.ebd3557c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/59.135dc4f6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/60.8157b299.js"><link rel="prefetch" href="/vuepress-starter/assets/js/61.fc50a77d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/62.6f754d98.js"><link rel="prefetch" href="/vuepress-starter/assets/js/63.ccb14b40.js"><link rel="prefetch" href="/vuepress-starter/assets/js/64.dd82825c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/65.b959b86f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/66.b0b4cba2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/67.cde62c48.js"><link rel="prefetch" href="/vuepress-starter/assets/js/68.b2df89ba.js"><link rel="prefetch" href="/vuepress-starter/assets/js/69.d2606ae8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/7.508dbc0c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/70.bcf5740e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/71.ae4b4afc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/72.b4b6aea8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/73.557dc0c8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/74.8fbeaefd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/75.c8657518.js"><link rel="prefetch" href="/vuepress-starter/assets/js/76.02af007a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/77.5237e8df.js"><link rel="prefetch" href="/vuepress-starter/assets/js/78.c4a8572f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/79.5090dfdc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/8.fe4324db.js"><link rel="prefetch" href="/vuepress-starter/assets/js/80.356a2507.js"><link rel="prefetch" href="/vuepress-starter/assets/js/9.dbd5165e.js">
    <link rel="stylesheet" href="/vuepress-starter/assets/css/0.styles.d7e25954.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-starter/" class="home-link router-link-active"><!----> <span class="site-name">TS文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-starter/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-starter/page/js/" class="nav-link">
  面试集合
</a></div><div class="nav-item"><a href="/vuepress-starter/handbook/ConditionalTypes.html" class="nav-link">
  vue组件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" JavaScript 博客" class="dropdown-title"><span class="title"> JavaScript 博客</span> <span class="arrow down"></span></button> <button type="button" aria-label=" JavaScript 博客" class="mobile-dropdown-title"><span class="title"> JavaScript 博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/strongkin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-starter/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-starter/page/js/" class="nav-link">
  面试集合
</a></div><div class="nav-item"><a href="/vuepress-starter/handbook/ConditionalTypes.html" class="nav-link">
  vue组件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" JavaScript 博客" class="dropdown-title"><span class="title"> JavaScript 博客</span> <span class="arrow down"></span></button> <button type="button" aria-label=" JavaScript 博客" class="mobile-dropdown-title"><span class="title"> JavaScript 博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/strongkin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js基础学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js高级学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>react学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-starter/page/react/reactbase.html" class="sidebar-link">reacr基础</a></li><li><a href="/vuepress-starter/page/react/componentreact.html" aria-current="page" class="active sidebar-link">组件基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#函数组件" class="sidebar-link">函数组件</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#类与继承" class="sidebar-link">类与继承</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#类组件" class="sidebar-link">类组件</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#将组件提取到单独的js文件中" class="sidebar-link">将组件提取到单独的js文件中</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#有状态组件和无状态组件" class="sidebar-link">有状态组件和无状态组件</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#类组件的状态" class="sidebar-link">类组件的状态</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#react插件的安装-没网" class="sidebar-link">react插件的安装（没网）</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#注册事件" class="sidebar-link">注册事件</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#事件对象" class="sidebar-link">事件对象</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#this指向问题" class="sidebar-link">this指向问题</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#this指向问题解决方案" class="sidebar-link">this指向问题解决方案</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#受控组件基本概念" class="sidebar-link">受控组件基本概念</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#受控组件使用步骤" class="sidebar-link">受控组件使用步骤</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#常见的受控组件" class="sidebar-link">常见的受控组件</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#多表单元素的优化" class="sidebar-link">多表单元素的优化</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#非受控组件-ref" class="sidebar-link">非受控组件-ref</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#列表展示功能" class="sidebar-link">列表展示功能</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#发表评论功能" class="sidebar-link">发表评论功能</a></li><li class="sidebar-sub-header"><a href="/vuepress-starter/page/react/componentreact.html#清空评论功能" class="sidebar-link">清空评论功能</a></li></ul></li><li><a href="/vuepress-starter/page/react/componentContext.html" class="sidebar-link">组件通讯</a></li><li><a href="/vuepress-starter/page/react/ComponentLifeCycle.html" class="sidebar-link">组件的生命周期</a></li><li><a href="/vuepress-starter/page/react/reactsource.html" class="sidebar-link">react原理解密</a></li><li><a href="/vuepress-starter/page/react/reactRouter.html" class="sidebar-link">react路由</a></li><li><a href="/vuepress-starter/page/react/componentreuse.html" class="sidebar-link">组件复用</a></li><li><a href="/vuepress-starter/page/react/react-hooks.html" class="sidebar-link">hooks基础</a></li><li><a href="/vuepress-starter/page/react/hooksadvanced.html" class="sidebar-link">hooks进阶</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ts学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>uniapp知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue电商后台项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>移动h5</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="学习目标"><a href="#学习目标" class="header-anchor">#</a> 学习目标</h1> <ul><li>能够使用函数创建组件-函数组件</li> <li>能够掌握class语法 extends继承</li> <li>能够使用class创建组件-类组件</li> <li>能够给React元素绑定事件</li> <li>能够使用state与setState</li> <li>能够处理事件中this的指向问题</li> <li>能够使用受控组件方式处理表单</li></ul> <h1 id="组件基本介绍"><a href="#组件基本介绍" class="header-anchor">#</a> 组件基本介绍</h1> <ul><li>组件是React中最基本的内容，使用React就是在使用组件</li> <li>组件表示页面中的部分功能</li> <li>多个组件可以实现完整的页面功能</li> <li>组件特点：可复用，独立，可组合</li></ul> <p><img src="/vuepress-starter/assets/img/component.339d2f39.png" alt=""></p> <h1 id="react创建组件的两种方式"><a href="#react创建组件的两种方式" class="header-anchor">#</a> React创建组件的两种方式</h1> <h2 id="函数组件"><a href="#函数组件" class="header-anchor">#</a> 函数组件</h2> <blockquote><p>函数组件：使用JS的函数或者箭头函数创建的组件</p></blockquote> <ul><li>为了区分普通标签，函数组件的名称必须<code>大写字母开头</code></li> <li>函数组件<code>必须有返回值</code>，表示该组件的结构</li> <li>如果返回值为null,表示不渲染任何内容</li></ul> <p>使用函数创建组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Hello</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是我的函数组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用箭头函数创建组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是一个函数组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="类与继承"><a href="#类与继承" class="header-anchor">#</a> 类与继承</h2> <h3 id="class-基本语法"><a href="#class-基本语法" class="header-anchor">#</a> class 基本语法</h3> <ul><li>在 ES6 之前通过构造函数创建对象</li> <li>在 ES6 中新增了一个关键字 class, 类 和构造函数类似，用于创建对象
<ul><li>类与对象的区别</li> <li>类：指的是一类的事物，是个概念，比如车 手机 水杯等</li> <li>对象：一个具体的事物，有具体的特征和行为，比如一个手机，我的手机等， 类可以创建出来对象。</li></ul></li> <li>类创建对象的基本语法
<ul><li>基本语法<code>class 类名{}</code></li> <li>构造函数<code>constructor</code>的用法，创建对象</li> <li>在类中提供方法，直接提供即可</li> <li>在类中不需要使用,分隔</li></ul></li></ul> <h3 id="extends-实现继承"><a href="#extends-实现继承" class="header-anchor">#</a> extends 实现继承</h3> <ul><li>extends 基本使用</li> <li>类可以使用它继承的类中所有的成员（属性和方法）</li> <li>类中可以提供自己的属性和方法</li> <li>注意：如果想要给类中新增属性，必须先调用 super 方法</li></ul> <h2 id="类组件"><a href="#类组件" class="header-anchor">#</a> 类组件</h2> <blockquote><p>类组件：使用ES6的class语法创建组件</p></blockquote> <p>约定1：类组件的名称必须是大写字母开头</p> <p>约定2：类组件应该继承<code>React.Component</code>父类，从而可以使用父类中提供的方法或者属性</p> <p>约定3：类组件必须提供<code>render</code>方法</p> <p>约定4：render方法<code>必须有返回值</code>,表示该组件的结构</p> <p>定义组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是一个类组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="将组件提取到单独的js文件中"><a href="#将组件提取到单独的js文件中" class="header-anchor">#</a> 将组件提取到单独的js文件中</h2> <p>思考：项目中的组件多了之后，该如何组织这些组件呢？</p> <ul><li>选择一：将所有组件放在同一个JS文件中</li> <li>选择二：将每个组件放到单独的JS文件中</li> <li>组件作为一个独立的个体，一般都会放到一个单独的 JS 文件中</li></ul> <p>实现方式</p> <ol><li>创建Hello.js</li> <li>创建组件（函数 或 类）</li> <li>在 Hello.js 中导出该组件</li> <li>在 index.js 中导入 Hello 组件</li> <li>渲染组件，</li></ol> <h2 id="有状态组件和无状态组件"><a href="#有状态组件和无状态组件" class="header-anchor">#</a> 有状态组件和无状态组件</h2> <ul><li>函数组件又叫做<strong>无状态组件</strong>   函数组件是不能自己提供数据【前提：基于hooks之前说的】</li> <li>类组件又叫做<strong>有状态组件</strong> 类组件可以自己提供数据，，，，组件内部的状态（数据如果发生了改变，内容会自动的更新）数据驱动视图</li> <li>状态（state）即组件的私有数据，当组件的状态发生了改变，页面结构也就发生了改变。</li> <li>函数组件是没有状态的，只负责页面的展示（静态，不会发生变化）性能比较高</li> <li>类组件有自己的状态，负责<strong>更新UI</strong>，只要类组件的数据发生了改变，UI就会发生更新。</li> <li>在复杂的项目中，一般都是由函数组件和类组件共同配合来完成的。【增加了使用者的负担，所以后来有了hooks】</li></ul> <p>比如计数器案例，点击按钮让数值+1， 0和1就是不同时刻的状态，当状态从0变成1之后，UI也要跟着发生变化。React想要实现这种功能，就需要使用有状态组件来完成。</p> <p><img src="/vuepress-starter/assets/img/state.fbe8bc42.png" alt=""></p> <h2 id="类组件的状态"><a href="#类组件的状态" class="header-anchor">#</a> 类组件的状态</h2> <ul><li>状态<code>state</code>即数据，是组件内部的<code>私有数据</code>,只有在组件内部可以使用</li> <li><code>state的值是一个对象</code>,表示一个组件中可以有多个数据</li> <li>state的基本使用</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 组件通过state提供数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>state中的数据<span class="token operator">--</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>简洁的语法</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>state中的数据<span class="token operator">--</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="react插件的安装-没网"><a href="#react插件的安装-没网" class="header-anchor">#</a> react插件的安装（没网）</h2> <p>安装谷歌插件<code>react-devtools</code></p> <h1 id="事件处理"><a href="#事件处理" class="header-anchor">#</a> 事件处理</h1> <h2 id="注册事件"><a href="#注册事件" class="header-anchor">#</a> 注册事件</h2> <p>React注册事件与DOM的事件语法非常像</p> <p>语法<code>on+事件名=｛事件处理程序｝</code> 比如<code>onClick={this.handleClick}</code></p> <p>注意：<strong>React事件采用驼峰命名法</strong>，比如<code>onMouseEnter</code>, <code>onClick</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击事件触发了'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="事件对象"><a href="#事件对象" class="header-anchor">#</a> 事件对象</h2> <ul><li>可以通过事件处理程序的参数获取到事件对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'事件对象'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>a onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我，不会跳转页面<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="this指向问题"><a href="#this指向问题" class="header-anchor">#</a> this指向问题</h2> <blockquote><p>事件处理程序中的this指向的是undefined</p> <p>render方法中的this指向的而是当前react组件。<strong>只有事件处理程序中的this有问题</strong></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="this指向问题解决方案"><a href="#this指向问题解决方案" class="header-anchor">#</a> this指向问题解决方案</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>方案<span class="token number">1</span>：箭头函数
方案<span class="token number">2</span>：bind修改<span class="token keyword">this</span>指向
方案<span class="token number">3</span>：类实例方法

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>在render中使用箭头函数</li></ul> <p>箭头函数的特点：自身没有this，访问的是外部的this</p> <p>方式1：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>缺点：会把大量的js处理逻辑放到JSX中，将来不容易维护</p> <p>方式2</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>缺点：把大量的js逻辑写在了JSX结构中，不好维护</p> <ul><li>解决方案2：使用bind</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>或者</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>解决方案3：class实例方法</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>注意：这个语法是试验性的语法，但是有babel的转义，所以没有任何问题</strong></p> <h1 id="setstate修改状态"><a href="#setstate修改状态" class="header-anchor">#</a> setState修改状态</h1> <ul><li>组件中的状态是可变的</li> <li>语法<code>this.setState({要修改的数据})</code></li> <li>注意：不要直接修改state中的值，必须通过<code>this.setState()</code>方法进行修改</li> <li><code>setState</code>的作用
<ul><li>修改state</li> <li>更新UI</li></ul></li> <li>思想：数据驱动视图</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>次数<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>react中核心理念：<strong>状态不可变</strong> <ul><li>不要直接修改react中state的值，而是提供新的值</li> <li>直接修改react中state的值，组件并不会更新</li></ul></li></ul> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 直接修改值的操作</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>

<span class="token comment">// 创建新的值的操作</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h1 id="表单处理"><a href="#表单处理" class="header-anchor">#</a> 表单处理</h1> <blockquote><p>我们在开发过程中，经常需要操作表单元素，比如获取表单的值或者是设置表单的值。</p></blockquote> <p>react中处理表单元素有两种方式：</p> <ul><li>受控组件</li> <li>非受控组件（DOM操作）</li></ul> <h2 id="受控组件基本概念"><a href="#受控组件基本概念" class="header-anchor">#</a> 受控组件基本概念</h2> <ul><li>HTML中表单元素是可输入的，即表单用户并维护着自己的可变状态（value）。</li> <li>但是在react中，可变状态通常是保存在state中的，并且要求状态只能通过<code>setState</code>进行修改。</li> <li>React中将state中的数据与表单元素的value值绑定到了一起，<code>由state的值来控制表单元素的值</code></li> <li>受控组件：<strong>value值受到了react控制的表单元素</strong></li></ul> <p><img src="/vuepress-starter/assets/img/component1.97ec3974.png" alt=""></p> <h2 id="受控组件使用步骤"><a href="#受控组件使用步骤" class="header-anchor">#</a> 受控组件使用步骤</h2> <ol><li>在state中添加一个状态，作为表单元素的value值（控制表单元素的值）</li> <li>给表单元素添加change事件，设置state的值为表单元素的值（控制值的变化）</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="常见的受控组件"><a href="#常见的受控组件" class="header-anchor">#</a> 常见的受控组件</h2> <ul><li>文本框、文本域、下拉框（操作value属性）</li> <li>复选框（操作checked属性）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">usernmae</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isSingle</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
 
  <span class="token function-variable function">handleName</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handleDesc</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handleCity</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">city</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handleSingle</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isSingle</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        姓名：<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleName<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
        描述：<span class="token operator">&lt;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>desc<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleDesc<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
        城市：<span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>city<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleCity<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>北京<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>上海<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span>广州<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>深圳<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
        是否单身：<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isSingle<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSingle<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="多表单元素的优化"><a href="#多表单元素的优化" class="header-anchor">#</a> 多表单元素的优化</h2> <p>问题：每个表单元素都需要一个单独的事件处理程序，处理太繁琐</p> <p>优化：使用一个事件处理程序处理多个表单元素</p> <p>步骤</p> <ul><li>给表单元素添加name属性，名称与state属性名相同</li> <li>根据表单元素类型获取对应的值</li> <li>在事件处理程序中通过<code>[name]</code>修改对应的state</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isSingle</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
 
  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> type<span class="token punctuation">,</span> value<span class="token punctuation">,</span> checked<span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> type<span class="token punctuation">,</span> value<span class="token punctuation">,</span> checked<span class="token punctuation">)</span>
    value <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token string">'checkbox'</span> <span class="token operator">?</span> checked <span class="token operator">:</span> value
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        姓名：<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
        描述：<span class="token operator">&lt;</span>textarea name<span class="token operator">=</span><span class="token string">&quot;desc&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>desc<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
        城市：<span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">&quot;city&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>city<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>北京<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>上海<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span>广州<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>深圳<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
        是否单身：<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;isSingle&quot;</span> checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isSingle<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="非受控组件-ref"><a href="#非受控组件-ref" class="header-anchor">#</a> 非受控组件-ref</h2> <blockquote><p>非受控组件借助于ref，使用原生DOM的方式来获取表单元素的值</p></blockquote> <p>使用步骤</p> <ul><li>调用<code>React.createRef()</code>方法创建一个ref</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>txtRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
txtRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>将创建好的ref对象添加到文本框中</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>通过ref对象获取文本框的值</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>非受控组件用的不多，推荐使用受控组件</p> <h1 id="综合案例"><a href="#综合案例" class="header-anchor">#</a> 综合案例</h1> <p>评论列表案例</p> <h2 id="列表展示功能"><a href="#列表展示功能" class="header-anchor">#</a> 列表展示功能</h2> <p>渲染评论列表（列表渲染）</p> <ul><li>在state中初始化评论列表数据</li> <li>使用数组的map方法遍历列表数据</li> <li>给每个li添加key属性</li></ul> <h2 id="发表评论功能"><a href="#发表评论功能" class="header-anchor">#</a> 发表评论功能</h2> <p>获取评论信息，评论人和评论内容（受控组件）</p> <ul><li>使用受控组件的方式获取评论数据</li></ul> <p>发表评论，更新评论列表（更新状态）</p> <ul><li>给comments增加一条数据</li></ul> <p>边界处理</p> <ul><li>清空内容</li> <li>判断非空</li></ul> <h2 id="清空评论功能"><a href="#清空评论功能" class="header-anchor">#</a> 清空评论功能</h2> <ul><li>给清空评论按钮注册事件</li> <li>清空评论列表</li> <li>没有更多评论的处理</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-starter/page/react/reactbase.html" class="prev">
        reacr基础
      </a></span> <span class="next"><a href="/vuepress-starter/page/react/componentContext.html">
        组件通讯
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-starter/assets/js/app.4a327c45.js" defer></script><script src="/vuepress-starter/assets/js/6.a1faa4b0.js" defer></script><script src="/vuepress-starter/assets/js/38.ca98925e.js" defer></script>
  </body>
</html>
