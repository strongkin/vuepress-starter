<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>登录模块 | TS文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/vuepress-starter/images/good.png">
    <meta name="description" content="TS文档翻译">
    
    <link rel="preload" href="/vuepress-starter/assets/css/0.styles.e83b6921.css" as="style"><link rel="preload" href="/vuepress-starter/assets/js/app.b20a56ac.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/9.d0fd5d46.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/1.a4aa22ef.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/30.d6531e28.js" as="script"><link rel="prefetch" href="/vuepress-starter/assets/js/10.46cc27fc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/100.65cd0683.js"><link rel="prefetch" href="/vuepress-starter/assets/js/101.e1bbb60c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/102.8f399e2e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/103.4715dab9.js"><link rel="prefetch" href="/vuepress-starter/assets/js/104.4bb8ec1c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/105.5b6012f3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/106.937c2ca7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/107.aad3c0c3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/108.67962070.js"><link rel="prefetch" href="/vuepress-starter/assets/js/109.79d726b5.js"><link rel="prefetch" href="/vuepress-starter/assets/js/11.06f12993.js"><link rel="prefetch" href="/vuepress-starter/assets/js/110.2878a99b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/111.9f8250f1.js"><link rel="prefetch" href="/vuepress-starter/assets/js/112.2d69f6f0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/113.7c62515c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/114.53d04b04.js"><link rel="prefetch" href="/vuepress-starter/assets/js/115.289bc8ef.js"><link rel="prefetch" href="/vuepress-starter/assets/js/116.0b7f53ec.js"><link rel="prefetch" href="/vuepress-starter/assets/js/117.89a371f9.js"><link rel="prefetch" href="/vuepress-starter/assets/js/118.c70c254e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/119.630a71fc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/12.4c5e8861.js"><link rel="prefetch" href="/vuepress-starter/assets/js/120.12709ea5.js"><link rel="prefetch" href="/vuepress-starter/assets/js/121.0f334874.js"><link rel="prefetch" href="/vuepress-starter/assets/js/13.d398cecd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/14.78dec744.js"><link rel="prefetch" href="/vuepress-starter/assets/js/15.4afc449e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/16.a7ffdc56.js"><link rel="prefetch" href="/vuepress-starter/assets/js/17.2fc5316e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/18.0b0a5722.js"><link rel="prefetch" href="/vuepress-starter/assets/js/19.49ab825a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/2.27084988.js"><link rel="prefetch" href="/vuepress-starter/assets/js/20.e7219a90.js"><link rel="prefetch" href="/vuepress-starter/assets/js/21.99237387.js"><link rel="prefetch" href="/vuepress-starter/assets/js/22.6f1a6770.js"><link rel="prefetch" href="/vuepress-starter/assets/js/23.86e35e17.js"><link rel="prefetch" href="/vuepress-starter/assets/js/24.8dfe7e9e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/25.d2ea21b1.js"><link rel="prefetch" href="/vuepress-starter/assets/js/26.d50c853f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/27.6a65ee70.js"><link rel="prefetch" href="/vuepress-starter/assets/js/28.febaebbd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/29.d4f936cd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/31.8eebb916.js"><link rel="prefetch" href="/vuepress-starter/assets/js/32.64885e9b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/33.28c745af.js"><link rel="prefetch" href="/vuepress-starter/assets/js/34.8743457f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/35.0344e55d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/36.235ec1e0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/37.5275c45e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/38.2e08c840.js"><link rel="prefetch" href="/vuepress-starter/assets/js/39.5e7da7f8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/4.82db5dac.js"><link rel="prefetch" href="/vuepress-starter/assets/js/40.16eae144.js"><link rel="prefetch" href="/vuepress-starter/assets/js/41.25fe991d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/42.14961272.js"><link rel="prefetch" href="/vuepress-starter/assets/js/43.d4f830c7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/44.95ee17bd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/45.8a759a6f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/46.89b508b9.js"><link rel="prefetch" href="/vuepress-starter/assets/js/47.68cb02e1.js"><link rel="prefetch" href="/vuepress-starter/assets/js/48.67adc85e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/49.3ef19540.js"><link rel="prefetch" href="/vuepress-starter/assets/js/5.96e99ac8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/50.2d8fded0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/51.a45747d9.js"><link rel="prefetch" href="/vuepress-starter/assets/js/52.b50bfd2d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/53.b8152f0a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/54.57ca6a3e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/55.ddc626b3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/56.b14df23b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/57.400e6578.js"><link rel="prefetch" href="/vuepress-starter/assets/js/58.bb9c31d7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/59.fec9949e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/6.08009833.js"><link rel="prefetch" href="/vuepress-starter/assets/js/60.ece2362a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/61.394b2c5d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/62.192362bb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/63.4c2ce96e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/64.ba4336a5.js"><link rel="prefetch" href="/vuepress-starter/assets/js/65.e27d1c94.js"><link rel="prefetch" href="/vuepress-starter/assets/js/66.f28fa041.js"><link rel="prefetch" href="/vuepress-starter/assets/js/67.c9fba5a5.js"><link rel="prefetch" href="/vuepress-starter/assets/js/68.512cb88e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/69.e792e760.js"><link rel="prefetch" href="/vuepress-starter/assets/js/7.b29f260f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/70.02c03ce3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/71.81da702b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/72.f477e9aa.js"><link rel="prefetch" href="/vuepress-starter/assets/js/73.86570555.js"><link rel="prefetch" href="/vuepress-starter/assets/js/74.6bdf2ef7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/75.2d0001c6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/76.0c0a0883.js"><link rel="prefetch" href="/vuepress-starter/assets/js/77.96c9c222.js"><link rel="prefetch" href="/vuepress-starter/assets/js/78.62a7e98a.js"><link rel="prefetch" href="/vuepress-starter/assets/js/79.3bb0eee2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/8.52565df0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/80.f51a42bd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/81.2742b447.js"><link rel="prefetch" href="/vuepress-starter/assets/js/82.092fe8c0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/83.d73470b8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/84.4f2bba2f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/85.5b372020.js"><link rel="prefetch" href="/vuepress-starter/assets/js/86.868b1ac7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/87.5c91c62d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/88.674fd391.js"><link rel="prefetch" href="/vuepress-starter/assets/js/89.367653dc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/90.09f6c455.js"><link rel="prefetch" href="/vuepress-starter/assets/js/91.0210ac1c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/92.0b083417.js"><link rel="prefetch" href="/vuepress-starter/assets/js/93.5b306406.js"><link rel="prefetch" href="/vuepress-starter/assets/js/94.02ac3fb2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/95.039b1059.js"><link rel="prefetch" href="/vuepress-starter/assets/js/96.6169eba6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/97.36acefcd.js"><link rel="prefetch" href="/vuepress-starter/assets/js/98.53140f5b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/99.d0f7d03c.js">
    <link rel="stylesheet" href="/vuepress-starter/assets/css/0.styles.e83b6921.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>TS文档</h3> <p class="description" data-v-59e6cb88>TS文档翻译</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2022
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-starter/" class="home-link router-link-active"><img src="/vuepress-starter/images/good.png" alt="TS文档" class="logo"> <span class="site-name">TS文档</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-starter/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="/vuepress-starter/page/js/" class="nav-link"><i class="undefined"></i>
  面试集合
</a></div><div class="nav-item"><a href="/vuepress-starter/handbook/ConditionalTypes.html" class="nav-link"><i class="undefined"></i>
  vue组件
</a></div><div class="nav-item"><a href="/vuepress-starter/vue/vuebase.html" class="nav-link"><i class="undefined"></i>
  vue学习
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
       JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/strongkin" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/vuepress-starter/images/good.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>105</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepress-starter/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="/vuepress-starter/page/js/" class="nav-link"><i class="undefined"></i>
  面试集合
</a></div><div class="nav-item"><a href="/vuepress-starter/handbook/ConditionalTypes.html" class="nav-link"><i class="undefined"></i>
  vue组件
</a></div><div class="nav-item"><a href="/vuepress-starter/vue/vuebase.html" class="nav-link"><i class="undefined"></i>
  vue学习
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
       JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/strongkin" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-starter/handbook/" class="sidebar-heading clickable router-link-active"><span>基础学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-0"><a href="/vuepress-starter/handbook/vueRabbitTs/01-项目起步" class="sidebar-heading clickable open"><span>小兔仙+TS+pinia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-starter/handbook/vueRabbitTs/01-项目起步.html" class="sidebar-link">项目起步</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/02-首页模块.html" class="sidebar-link">首页模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/03-分类模块.html" class="sidebar-link">分类模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/04-详情模块.html" class="sidebar-link">详情模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/05-登录模块.html" class="active sidebar-link">登录模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/06-购物车模块.html" class="sidebar-link">购物车模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/07-订单模块.html" class="sidebar-link">订单模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/08-支付模块.html" class="sidebar-link">支付模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/09-会员模块.html" class="sidebar-link">会员模块</a></li><li><a href="/vuepress-starter/handbook/vueRabbitTs/拓展阅读.html" class="sidebar-link">拓展阅读</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2022
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">登录模块</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="登录模块"><a href="#登录模块" class="header-anchor">#</a> 登录模块</h1> <h2 id="路由与组件"><a href="#路由与组件" class="header-anchor">#</a> 路由与组件</h2> <blockquote><p>目标：登录组件在书写一级路由的时候已经准备，添加路由链接跳转到登录页即可。</p></blockquote> <ul><li>添加跳转链接：<code>src/components/app-topnav.vue</code></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请先登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="结构布局-cv"><a href="#结构布局-cv" class="header-anchor">#</a> 结构布局-CV</h3> <p><img src="/vuepress-starter/assets/img/01-16459813154986.5471d149.png" alt=""></p> <p>静态结构参考代码 - CV</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 1. 头部 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>小兔鲜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>欢迎登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>entry<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          进入网站首页
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 2. 主体登录区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>账户登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LoginForm</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 3. 底部 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于我们<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>帮助中心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>售后服务<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>配送与验收<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>商务合作<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>搜索推荐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>友情链接<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>CopyRight <span class="token entity named-entity" title="&amp;copy;">&amp;copy;</span> 小兔鲜儿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">// 头部样式
.login-header</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #e4e4e4<span class="token punctuation">;</span>
  <span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.logo</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 132px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">text-indent</span><span class="token punctuation">:</span> -9999px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>@/assets/images/logo.png<span class="token punctuation">)</span></span> no-repeat center 18px / contain<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.sub</span> <span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.entry</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token selector">i</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token property">letter-spacing</span><span class="token punctuation">:</span> -5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">// 主体样式
.login-section</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>@/assets/images/login-bg.png<span class="token punctuation">)</span></span> no-repeat center / cover<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 488px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token selector">.wrapper</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 380px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 54px<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>100px<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token selector">nav</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 55px<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #f5f5f5<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 40px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">// 底部样式
.login-footer</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 30px 0 50px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token selector">p</span> <span class="token punctuation">{</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
      <span class="token selector">~ a</span> <span class="token punctuation">{</span>
        <span class="token property">border-left</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="表单布局-cv"><a href="#表单布局-cv" class="header-anchor">#</a> 表单布局-CV</h3> <blockquote><p>目标： 实现登录页面的整体大结构布局</p></blockquote> <ul><li>新建表单组件</li></ul> <p><code>src/views/Login/components/login-form.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入用户名或手机号<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 表单验证错误信息提示 --&gt;</span>
        <span class="token comment">&lt;!-- &lt;div class=&quot;error&quot;&gt;&lt;i class=&quot;iconfont icon-warning&quot; /&gt;请输入手机号&lt;/div&gt; --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-lock<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入密码<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>agree<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckBox</span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>我已同意<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>《隐私条款》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>和<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>《服务条款》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>忘记密码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>免费注册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">// 账号容器
.account-box</span> <span class="token punctuation">{</span>
  <span class="token selector">.toggle</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 15px 40px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token selector">i</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.form</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 20px<span class="token punctuation">;</span>
    <span class="token selector">&amp;-item</span> <span class="token punctuation">{</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
      <span class="token selector">.input</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
        <span class="token selector">&gt; i</span> <span class="token punctuation">{</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 34px<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 34px<span class="token punctuation">;</span>
          <span class="token property">background</span><span class="token punctuation">:</span> #cfcdcd<span class="token punctuation">;</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
          <span class="token property">top</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
          <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
          <span class="token property">line-height</span><span class="token punctuation">:</span> 34px<span class="token punctuation">;</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">input</span> <span class="token punctuation">{</span>
          <span class="token property">padding-left</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
          <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #cfcdcd<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
          <span class="token property">line-height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
          <span class="token selector">&amp;.error</span> <span class="token punctuation">{</span>
            <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@priceColor</span><span class="token punctuation">;</span></span>
          <span class="token punctuation">}</span>
          <span class="token selector">&amp;.active,
          &amp;:focus</span> <span class="token punctuation">{</span>
            <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.code</span> <span class="token punctuation">{</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">right</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
          <span class="token property">top</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
          <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
          <span class="token property">line-height</span><span class="token punctuation">:</span> 34px<span class="token punctuation">;</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
          <span class="token property">background</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 90px<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 34px<span class="token punctuation">;</span>
          <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&gt; .error</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@priceColor</span><span class="token punctuation">;</span></span>
        <span class="token selector">i</span> <span class="token punctuation">{</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
          <span class="token property">margin-right</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.agree</span> <span class="token punctuation">{</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #069<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.btn</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token selector">&amp;.disabled</span> <span class="token punctuation">{</span>
        <span class="token property">background</span><span class="token punctuation">:</span> #cfcdcd<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.action</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 20px 40px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">.url</span> <span class="token punctuation">{</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>登录模块入口组件  <code>src/views/Login/index.vue</code></p> <blockquote><p>在主体登录区域引入并使用表单组件。</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> LoginForm <span class="token keyword">from</span> <span class="token string">&quot;./components/login-form.vue&quot;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 1. 头部 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      ....
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 2. 主体登录区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>账户登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LoginForm</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 3. 底部 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      ....
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="消息提示组件-和-复选框组件"><a href="#消息提示组件-和-复选框组件" class="header-anchor">#</a> 消息提示组件 和 复选框组件</h2> <h3 id="组件外观"><a href="#组件外观" class="header-anchor">#</a> 组件外观</h3> <p><img src="/vuepress-starter/assets/img/05-1627943191361.7a5efd1e.png" alt=""></p> <p><img src="assets/image-20210803065321123.png" alt="image-20210803065321123"></p> <h3 id="xtxcheckbox-组件使用"><a href="#xtxcheckbox-组件使用" class="header-anchor">#</a> XtxCheckBox 组件使用</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isAgree <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckBox</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isAgree<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我已同意<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxCheckBox</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="message-组件使用"><a href="#message-组件使用" class="header-anchor">#</a> Message 组件使用</h3> <blockquote><p>Message 组件支持  函数  和 组件 两种调用方式：</p></blockquote> <h4 id="函数调用-推荐👍"><a href="#函数调用-推荐👍" class="header-anchor">#</a> 函数调用 - 推荐👍</h4> <ul><li>调用函数时由函数内部动态创建组件，使用完成自动卸载</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components/XtxUI/Message/index&quot;</span><span class="token punctuation">;</span>

<span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>组件库代码升级： <code>src\components\XtxUI\index.ts</code> 组件库做统一出口</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 做统一出口</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./Message/index&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>调用 message 函数变得更方便</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components/XtxUI&quot;</span><span class="token punctuation">;</span>

<span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="登录前表单校验"><a href="#登录前表单校验" class="header-anchor">#</a> 登录前表单校验</h2> <blockquote><p>目标：校验之前我们已经实现了很多次，这里弱化验证写法，简单做一个非空检验即可。</p></blockquote> <h3 id="参考代码"><a href="#参考代码" class="header-anchor">#</a> 参考代码</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components/XtxUI&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">account</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">loginBtn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>form<span class="token punctuation">.</span>account<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;用户名或手机号不能为空&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>form<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;密码不能为空&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isAgree<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;请同意许可&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;通过校验，可以发送请求&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


// 📌 绑定 form 响应式数据到表单元素中
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入用户名或手机号<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入密码<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckBox</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isAgree<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我已同意<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxCheckBox</span><span class="token punctuation">&gt;</span></span>

// 📌 登录按钮
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="会员-pinia-状态管理"><a href="#会员-pinia-状态管理" class="header-anchor">#</a> 会员 Pinia 状态管理</h2> <h3 id="新建-strore"><a href="#新建-strore" class="header-anchor">#</a> 新建 Strore</h3> <p>新建文件： <code>src\store\modules\member.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;member&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">// 状态</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 方法</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useMemberStore<span class="token punctuation">;</span>

</code></pre></div><h3 id="合并-store"><a href="#合并-store" class="header-anchor">#</a> 合并 Store</h3> <p>修改文件：<code>src\store\index.ts</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code>import { defineStore } from 'pinia';
import useHomeStore from './modules/home';
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import useMemberStore from './modules/member';
</span></span>
// 定义总Store，管理所有模块Store
const useStore = defineStore('main', {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // state 存放模块 Store
</span><span class="token prefix unchanged"> </span><span class="token line"> state: () =&gt; ({
</span><span class="token prefix unchanged"> </span><span class="token line">   home: useHomeStore(),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    member: useMemberStore(),
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }),
</span></span>});

// 默认导出
export default useStore;
</code></pre></div><ul><li>调试工具检查 Pinia。</li></ul> <h2 id="账户登录实现"><a href="#账户登录实现" class="header-anchor">#</a> 账户登录实现</h2> <blockquote><p><code>本节目标:</code>  实现账户名密码登录功能</p></blockquote> <h3 id="用户名和密码登录接口"><a href="#用户名和密码登录接口" class="header-anchor">#</a> 用户名和密码登录接口</h3> <p><strong>基本信息</strong></p> <p><strong>Path：</strong> /login</p> <p><strong>Method：</strong> POST</p> <p><strong>接口描述：</strong></p> <p>登录成功后，后台返回的 token，请在本地保存，并在每次请求接口时在 Header 中携带上。</p> <p><strong>请求参数</strong></p> <p><strong>Body</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>是否必须</th> <th>默认值</th> <th>备注</th> <th>其他信息</th></tr></thead> <tbody><tr><td>account</td> <td>string</td> <td>必须</td> <td></td> <td>用户名或手机号</td> <td>undefined: ceshi</td></tr> <tr><td>password</td> <td>string</td> <td>必须</td> <td></td> <td>密码</td> <td>undefined: 123456</td></tr></tbody></table> <h3 id="发送登录请求"><a href="#发送登录请求" class="header-anchor">#</a> 发送登录请求</h3> <p>修改文件：<code>src/store/modules/member.ts</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> http <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/utils/request&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;member&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">// 状态</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">profile</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 方法</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用户名和密码登录</span>
    <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">account</span><span class="token operator">:</span> string<span class="token punctuation">;</span> password<span class="token operator">:</span> string <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">http</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useMemberStore<span class="token punctuation">;</span>

</code></pre></div><p>3）登录表单调用</p> <p><code>login-form.vue</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
import { reactive, ref } from &quot;vue&quot;;
import useStore from &quot;@/store&quot;;

const isAgree = ref(false);
const form = reactive({
  account: &quot;sujiehao&quot;,
  password: &quot;123456&quot;,
});

const { member } = useStore();
const login = async () =&gt; {
  if (!form.account) {
    return message({ type: &quot;error&quot;, text: &quot;用户名或手机号不能为空&quot; });
  }
  if (!form.password) {
    return message({ type: &quot;error&quot;, text: &quot;密码不能为空&quot; });
  }
  if (!isAgree.value) {
    return message({ type: &quot;error&quot;, text: &quot;请同意许可&quot; });
  }
  // 发送登录请求
  await member.login(form);
};
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="定义ts类型"><a href="#定义ts类型" class="header-anchor">#</a> 定义TS类型</h3> <p>新增类型文件：<code>src\types\api\member.d.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  account<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  mobile<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  token<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  avatar<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  nickname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  gender<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  birthday<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  cityCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  provinceCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  profession<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>应用类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Profile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> http <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/utils/request&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components/XtxUI&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 🎯非 vue 组件，导入路由实例</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;@/router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;member&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 状态</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 用户信息</span>
    profile<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Profile<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否登录</span>
    <span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>profile<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 方法</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用户名和密码登录</span>
    <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token punctuation">{</span> account<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> password<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">http</span><span class="token generic class-name"><span class="token operator">&lt;</span>Profile<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 1. 保存用户信息到 state 中</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>profile <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
      <span class="token comment">// 2. 请求成功给用户提示</span>
      <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">&quot;登录成功&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 3. 跳转页面</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useMemberStore<span class="token punctuation">;</span>

</code></pre></div><h3 id="持久化存储"><a href="#持久化存储" class="header-anchor">#</a> 持久化存储</h3> <p>登录成功后，把用户信息保存到本地。(本地和pinia都保存)</p> <h3 id="用户信息渲染"><a href="#用户信息渲染" class="header-anchor">#</a> 用户信息渲染</h3> <p>用户信息渲染：  <code>Layout/components/app-topnav.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> useStore <span class="token keyword">from</span> <span class="token string">&quot;@/store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storeToRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> member <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// storeToRefs 解构出来的数据还能保持响应式</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> profile <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-topnav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>member.isLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
              {{ profile.nickname || profile.account || profile.mobile  }}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请先登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>免费注册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        ...
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="退出登录实现"><a href="#退出登录实现" class="header-anchor">#</a> 退出登录实现</h2> <p><code>本节目标:</code>  实现账户名密码登录功能</p> <p>1 提供 actions， 清空用户数据 （本地和pinia都清空）</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 退出登录</span>
    <span class="token keyword">async</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 清理 Pinia 用户信息</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>profile <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Profile<span class="token punctuation">;</span>
      <span class="token comment">// 2. 提示用户</span>
      <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'退出成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 3. 跳转页面</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="2"><li>页面中调用</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>profile.isLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      {{ profile.nickname || profile.account || profile.mobile  }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>member.logout()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="优化-登录成功页面回跳"><a href="#优化-登录成功页面回跳" class="header-anchor">#</a> 优化：登录成功页面回跳</h2> <p><code>src\views\Layout\components\app-topnav.vue</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RouterLink</span></span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/login?target=${$route.fullPath}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    请先登录
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">RouterLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>登录成功后跳转处理</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;member&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token comment">// 方法</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用户名密码登录</span>
    <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">account</span><span class="token operator">:</span> string<span class="token punctuation">;</span> password<span class="token operator">:</span> string <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
      <span class="token comment">// 🐛 在非 .vue 组件中 useRoute() 返回 undefined，没法获取当前路由信息</span>
      <span class="token comment">// 📌 解决方案，通过 router 路由实例 currentRoute 获取</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> target <span class="token operator">=</span> <span class="token string">&quot;/&quot;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>value<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
      <span class="token comment">// 跳转到指定地址</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>target <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="请求拦截器和响应拦截器"><a href="#请求拦截器和响应拦截器" class="header-anchor">#</a> 请求拦截器和响应拦截器</h2> <h3 id="请求拦截器-请求成功携带-token"><a href="#请求拦截器-请求成功携带-token" class="header-anchor">#</a> 请求拦截器 - 请求成功携带 token</h3> <p>完善请求拦截器 <code>utils/request.ts</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// 官方说明：https://pinia.vuejs.org/core-concepts/outside-component-usage.html</span>
<span class="token comment">// ❌ 非组件中，Pinia 常见错误写法</span>
<span class="token comment">// const { member } = useStore();</span>

<span class="token comment">// 添加请求拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在发送请求之前做些什么</span>
    <span class="token comment">// ✅ 在组件外，哪里使用，写哪里(消费前获取)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> member <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1. 获取token</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> token <span class="token punctuation">}</span> <span class="token operator">=</span> member<span class="token punctuation">.</span>profile<span class="token punctuation">;</span>
    <span class="token comment">// 2. token 和 headers 的非空判断</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>headers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 3. 请求头中携带 token 信息</span>
      config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 对请求错误做些什么</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="响应拦截器-请求失败提示用户"><a href="#响应拦截器-请求失败提示用户" class="header-anchor">#</a> 响应拦截器 - 请求失败提示用户</h3> <p>响应拦截器，添加错误提示</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/components/Message'</span>

<span class="token comment">// 添加响应拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
 <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果请求成功成功 2xx 就直接返回 data 中的数据</span>
   <span class="token keyword">return</span> response
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 对响应错误做点什么</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'ERR_NETWORK'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 无网络，错误提示</span>
      <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'亲，换个网络试试~'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 有网络，但后端认为有错误，提示后端响应的错误</span>
      <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 控制台显示错误</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="qq三方登录-前置环境和交互"><a href="#qq三方登录-前置环境和交互" class="header-anchor">#</a> QQ三方登录 - 前置环境和交互</h2> <h3 id="登录简要流程梳理"><a href="#登录简要流程梳理" class="header-anchor">#</a> 登录简要流程梳理</h3> <p><code>本节目标:</code>   掌握第三方登录的实现流程</p> <p><img src="/vuepress-starter/assets/img/06-1628025535476.57fbfa34.png" alt=""></p> <ol><li>在登录页面，QQ登录按钮处，添加个超链接，赋予其打开QQ登录页面功能</li> <li>回跳的页面得到QQ给的唯一标识 openId，根据openId去后台查询是否已经绑定过账户
<ul><li>如果绑定过，完成登录</li> <li>没有绑定过
<ul><li>有账号的，绑定手机号，即为登录</li> <li>没账号的，完善账户信息，注册后登录</li></ul></li></ul></li> <li>登录成功后，跳转首页或者来源页面</li></ol> <h3 id="申请流程"><a href="#申请流程" class="header-anchor">#</a> 申请流程</h3> <p>1）参考文档</p> <ol><li><a href="https://wiki.connect.qq.com/%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C_oauth2-0" target="_blank" rel="noopener noreferrer">准备工作(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://wiki.connect.qq.com/js_sdk%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E#3..E8.87.AA.E5.AE.9A.E4.B9.89.E7.99.BB.E5.BD.95.E6.8C.89.E9.92.AE" target="_blank" rel="noopener noreferrer">QQ互联JS_SDK(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <p>2）大概步骤</p> <ol><li>准备一个已经<strong>备案</strong>的网站需要有 <code>QQ</code> 登录的逻辑（登录页面，回跳页面）</li> <li>然后在 <code>QQ</code> 互联上进行<code>身份认证</code>，并且<code>审核通过</code></li> <li>在 <code>QQ</code> 互联上创建应用，应用需要域名，备案号，<strong>回调地址</strong>等</li> <li>等待人工审核，审核通过会得到 <code>应用ID</code> <code>回调地址</code> , <code>应用key</code> 后端使用。</li> <li>帮大家申请的结果如下：</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 测试用 appid </span>
<span class="token comment"># 100556005</span>

<span class="token comment"># 测试用 redirect_uri</span>
<span class="token comment"># http://www.corho.com:8080/#/login/callback</span>
</code></pre></div><h3 id="常见疑问❓"><a href="#常见疑问❓" class="header-anchor">#</a> 常见疑问❓</h3> <ol><li>这个申请工作一般由谁去做？
<ul><li>公司的运维 （负责管理公司账号的人）</li></ul></li> <li>申请下来的 id，应用 key，回调地址 uri  能改吗？
<ol><li>都不能修改，否则无效。</li> <li>🐛 回调地址 uri 的包含<strong>四部分</strong>： 1. 域名，2. 端口号  3. 哈希路由模式  4. 路由地址 <strong>都必须完全一致</strong>，否则不能展示。</li></ol></li> <li>🚨 访问 http://www.corho.com:8080/ 看不到内容？
<ol><li>修改脚手架 <code>vite.config.ts</code> 配置。</li> <li>修改电脑的 <code>host</code> 文件，访问本地服务器。</li></ol></li></ol> <h2 id="qq三方登录-电脑环境设置🚨"><a href="#qq三方登录-电脑环境设置🚨" class="header-anchor">#</a> QQ三方登录-电脑环境设置🚨</h2> <blockquote><p>目标：浏览器访问 http://www.corho.com:8080/#/login/callback 地址，能打开正在开发的本地 <code>Vue</code> 项目。</p></blockquote> <h3 id="核心步骤"><a href="#核心步骤" class="header-anchor">#</a> 核心步骤</h3> <ol><li>修改脚手架 <code>vite.config.ts</code> 配置。</li> <li>修改电脑的 <code>host</code> 文件。</li></ol> <h3 id="第一步-修改-vite-配置"><a href="#第一步-修改-vite-配置" class="header-anchor">#</a> 第一步：修改 <code>vite</code> 配置</h3> <p>修改 <code>vite.config.ts</code> 文件：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 配置开发服务器</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// QQ三方登录的回调uri为：http://www.corho.com:8080/#/login/callback</span>
    <span class="token comment">// vite 中配置： www.corho.com:8080</span>
    host<span class="token operator">:</span> <span class="token string">&quot;www.corho.com&quot;</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他有价值的配置项</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 帮我们打开浏览器</span>
    cors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许开发时 ajax 跨域</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="第二步-修改-host-文件"><a href="#第二步-修改-host-文件" class="header-anchor">#</a> 第二步：修改 <code>host</code> 文件</h3> <h4 id="windows-系统"><a href="#windows-系统" class="header-anchor">#</a> windows 系统</h4> <p>🔔提醒：修改电脑配置，需要先退出 360 或 各种管家 各种 杀毒软件</p> <p>🔔提醒：如果修改 hosts 文件有弹窗警告，点击信任（因为这是我们自己进行的安全操作）</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>. 找到 C:<span class="token punctuation">\</span>Windows<span class="token punctuation">\</span>System32<span class="token punctuation">\</span>drivers<span class="token punctuation">\</span>etc 下 hosts 文件
<span class="token number">2</span>. 在文件中加入  <span class="token number">127.0</span>.0.1    www.corho.com
<span class="token number">3</span>. 保存即可

<span class="token comment"># 如果提示没有权限</span>
<span class="token number">1</span>. 将hosts文件移到桌面，然后进行修改，确认保存。
<span class="token number">2</span>. 将桌面hosts文件替换c盘文件
</code></pre></div><h4 id="mac-os-系统"><a href="#mac-os-系统" class="header-anchor">#</a> mac OS 系统</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>. 打开命令行窗口
<span class="token number">2</span>. 输入：sudo <span class="token function">vim</span> /etc/hosts
<span class="token number">3</span>. 按下：i 键
<span class="token number">4</span>. 输入：127.0.0.1       www.corho.com
<span class="token number">5</span>. 按下：esc
<span class="token number">6</span>. 按下：shift + <span class="token builtin class-name">:</span>
<span class="token number">7</span>. 输入：wq 回车即可
</code></pre></div><h3 id="关键步骤验证"><a href="#关键步骤验证" class="header-anchor">#</a> 关键步骤验证</h3> <p>📌步骤验证：浏览器访问 <a href="http://www.corho.com:8080/#/" target="_blank" rel="noopener noreferrer">http://www.corho.com:8080/#/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 能看到自己开发的 Vue3 项目表示成功。</p> <h3 id="dns-解析概念-了解"><a href="#dns-解析概念-了解" class="header-anchor">#</a> DNS 解析概念 - 了解</h3> <blockquote><p>由于本地我们的网站是访问<code>http://localhost:3000</code></p> <p>而回调地址的域名是<code>http://www.corho.com:8080</code>，俩个地址不一致是无法进行跳转的，</p> <p>需要我们修改本地的 hosts 文件，让域名访问时解析到我们本地的ip上</p> <p>DNS 解析：（网络中，服务器不认域名的，认的是 ip） www.jd.com</p> <ol><li>作用是将域名地址解析成ip地址</li> <li>优先级  先以本地的 hosts 文件为主  然后才走线上的dns服务器</li></ol></blockquote> <p>DSN解析说明</p> <p>DNS解析: 将域名解析成ip地址的过程。</p> <p>想看一个网站 www.jd.com   =&gt;   电脑不知道什么是 www.jd.com，需要询问的</p> <ol><li><p>先问本地 hosts 文件（一般不改） 如果本地配置了 域名 和 地址的映射关系，优先使用 hosts 中的映射</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1           www.jd.com
</code></pre></div></li> <li><p>如果本地hosts文件里面没配（默认一般都没配）比如：找www.baidu.com</p> <div class="language- extra-class"><pre class="language-text"><code>会找线上的 dns 服务器， dns 服务器就像一个字典， 字典中记录大量的 网站域名 和 网站ip 的对应关系

dns 服务器
112.80.248.75      www.baidu.com
xxx.xx.xxx.xx      www.xxx.com
</code></pre></div></li></ol> <h2 id="回跳页面路由准备"><a href="#回跳页面路由准备" class="header-anchor">#</a> 回跳页面路由准备</h2> <p>前面的配置完成了：http://www.corho.com:8080/#/</p> <p>接下来在完善：http://www.corho.com:8080/#/login/callback</p> <h3 id="配置路由和组件"><a href="#配置路由和组件" class="header-anchor">#</a> 配置路由和组件</h3> <p>新建组件：<code>views/Login/callback.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>三方登录的回跳页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>配置路由：</p> <p>2）绑定路由 (一级路由)</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login/callback'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Login/callback.vue'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>📌步骤验证：<a href="http://www.corho.com:8080/#/login/callback" target="_blank" rel="noopener noreferrer">http://www.corho.com:8080/#/login/callback<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 看到回调页面组件。</p> <p>🚨常见错误：没有使用 hash 哈希路由模式，无法识别 # 哈希部分路径，请检查并修正。</p> <h2 id="qq授权登录实现"><a href="#qq授权登录实现" class="header-anchor">#</a> QQ授权登录实现</h2> <p><img src="/vuepress-starter/assets/img/image-20220222213438246.bf4ab26c.png" alt="image-20220222213438246"></p> <h3 id="按钮跳转实现"><a href="#按钮跳转实现" class="header-anchor">#</a> 按钮跳转实现</h3> <p>1）在<code>index.html</code> 开发需要的添加 <code>sdk.js</code>  文件导入。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://connect.qq.com/qc_jssdk.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-appid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100556005<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-redirecturi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.corho.com:8080/#/login/callback<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2）在 <code>src/views/login/components/login-form.vue</code> 给图片套上跳转链接。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
        <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`https://graph.qq.com/oauth2.0/authorize?response_type=token&amp;scope=all&amp;client_id=${'100556005'}&amp;redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback`<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3）点击QQ登录按钮，点击后新窗口打开登录页面</p> <p><img src="/vuepress-starter/assets/img/08-1628025535476.75fec748.png" alt=""></p> <p>小知识补充：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 这是什么东西，怎么看起来像乱码？</span>
http<span class="token operator">%</span>3A<span class="token operator">%</span>2F<span class="token operator">%</span>2Fwww<span class="token punctuation">.</span>corho<span class="token punctuation">.</span>com<span class="token operator">%</span>3A8080<span class="token operator">%</span>2F<span class="token operator">%</span><span class="token number">23</span><span class="token operator">%</span>2Flogin<span class="token operator">%</span>2Fcallback

<span class="token comment">// 解码</span>
<span class="token function">decodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback'</span><span class="token punctuation">)</span>
<span class="token comment">// 解码结果：'http://www.corho.com:8080/#/login/callback'</span>

<span class="token comment">// 转码</span>
<span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'http://www.corho.com:8080/#/login/callback'</span><span class="token punctuation">)</span>
<span class="token comment">// 转码结果：'http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback'</span>
</code></pre></div><h2 id="qq互联核心-api"><a href="#qq互联核心-api" class="header-anchor">#</a> QQ互联核心 API</h2> <p><a href="https://wiki.connect.qq.com/js_sdk%e4%bd%bf%e7%94%a8%e8%af%b4%e6%98%8e" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="项目中需要用到的-3-个-api"><a href="#项目中需要用到的-3-个-api" class="header-anchor">#</a> 项目中需要用到的 3 个 API</h3> <ul><li>QC.Login.check
<ul><li>检查用户是否登录</li></ul></li> <li>QC.api(&quot;get_user_info&quot;).success
<ul><li>获取信息</li></ul></li> <li>QC.Login.getMe
<ul><li>获取 QQ 用户唯一标识 openId</li></ul></li></ul> <h3 id="eslint-添全局变量"><a href="#eslint-添全局变量" class="header-anchor">#</a> ESlint 添全局变量</h3> <ul><li>注意：由于项目开启了 <code>eslint</code> 检查，需要在 <code>.eslintrc.cjs</code> 添加<code>QC</code> 全局变量。</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// eslintrc.cjs</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token comment">// 全局变量</span>
  globals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token constant">QC</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ts-类型声明文件"><a href="#ts-类型声明文件" class="header-anchor">#</a> TS 类型声明文件</h3> <ul><li>注意：由于是 TS 开发，需要在 <code>env.d.ts</code> 添加 <code>QC</code> 类型声明。</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// env.d.ts</span>

<span class="token comment">// QC 类型声明 - QQ 登录模块</span>
declare namespace QC <span class="token punctuation">{</span>
  const Login<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// QC.Login.check()</span>
    check<span class="token operator">:</span> () =&gt; boolean;
    <span class="token comment">// QC.Login.getMe((openId) =&gt; {</span>
    <span class="token comment">//   console.log(&quot;获取QQ用户openId&quot;, openId);</span>
    <span class="token comment">// });</span>
    getMe<span class="token operator">:</span> (callback<span class="token operator">:</span> (openId<span class="token operator">:</span> string) =&gt; void) =&gt; void;
  <span class="token punctuation">}</span>;
  <span class="token comment">// QC.api(&quot;get_user_info&quot;).success((res: unknown) =&gt; {</span>
  <span class="token comment">//   console.log(&quot;获取QQ用户资料&quot;, res);</span>
  <span class="token comment">// });</span>
  function api(s<span class="token operator">:</span> string)<span class="token operator">:</span> <span class="token punctuation">{</span>
    success<span class="token operator">:</span> (res<span class="token operator">:</span> unknown) =&gt; void;
  <span class="token punctuation">}</span>;
<span class="token punctuation">}</span>
</code></pre></div><h3 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 1. 检查用户是否已登录</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">QC</span><span class="token punctuation">.</span>Login<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 2. 获取 QQ 用户唯一标识 openId</span>
  <span class="token constant">QC</span><span class="token punctuation">.</span>Login<span class="token punctuation">.</span><span class="token function">getMe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">openId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;🗝️openId&quot;</span><span class="token punctuation">,</span> openId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 3. 获取用户资料</span>
  <span class="token constant">QC</span><span class="token punctuation">.</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token string">&quot;get_user_info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">res</span><span class="token operator">:</span> unknown</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;😀获取用户资料&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>callback-QQ登录回跳页面测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="回跳组件静态结构"><a href="#回跳组件静态结构" class="header-anchor">#</a> 回跳组件静态结构</h2> <blockquote><p>目标：准备静态结果，渲染切换效果。</p></blockquote> <p><img src="/vuepress-starter/assets/img/image-20210804062529636.d891b6ee.png" alt="image-20210804062529636"></p> <h3 id="静态结构"><a href="#静态结构" class="header-anchor">#</a> 静态结构</h3> <ul><li><p>复制组件静态结构：<code>views/Login/callback.vue</code></p></li> <li><p>温馨提示：头部和底部和登录页相同，自己完成 <code>LoginHeader</code>  头部组件和  <code>LoginFooter</code>  底部组件的抽离。</p></li></ul> <div class="language-html extra-class"><pre class="language-html"><code>...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LoginHeader</span><span class="token punctuation">&gt;</span></span>联合登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LoginHeader</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
        <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> 
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-bind<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>已有小兔鲜账号，请绑定手机<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
        <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-edit<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>没有小兔鲜账号，请完善资料<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 内容 --&gt;</span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LoginFooter</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>less<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 25px 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tab</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token selector">a</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 2px solid #e4e4e4<span class="token punctuation">;</span>
    <span class="token selector">i</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">span</span> <span class="token punctuation">{</span>
      <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;.active</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.tab-content</span> <span class="token punctuation">{</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3）准备绑定手机组件 (有老账号)  和  完善信息组件（新账号）</p> <p><code>src/views/Login/components/callback-bind.vue</code> 绑定手机</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://qzapp.qlogo.cn/qzapp/100556005/86EB7ABDD27C651376A94AC9DF95B7BD/100<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hi，Vue3 欢迎来小兔鲜，完成绑定后可以QQ账号一键登录哦~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon iconfont icon-phone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>绑定的手机号<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon iconfont icon-code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>短信验证码<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送验证码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>立即绑定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.user-info</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
  <span class="token selector">img</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">p</span> <span class="token punctuation">{</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.code</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><code>src/views/Login/components/callback-register.vue</code> 注册信息</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon iconfont icon-user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入用户名<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon iconfont icon-phone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入手机号<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon iconfont icon-code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入验证码<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送验证码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon iconfont icon-lock<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入密码<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon iconfont icon-lock<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请确认密码<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>立即提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.code</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>4）使用组件</p> <p><img src="/vuepress-starter/assets/img/image-20210818144919351.d238d461.png" alt="image-20210818144919351"></p> <h3 id="完成切换交互"><a href="#完成切换交互" class="header-anchor">#</a> 完成切换交互</h3> <p><img src="/vuepress-starter/assets/img/image-20210804062606238.bba2ff9b.png" alt="image-20210804062606238"></p> <blockquote><p>实现思路 :  典型的tab类效果实现，升级成 <code>&lt;KeepAlive&gt;</code> 动态组件实现。</p></blockquote> <p><strong>代码落地</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">...</span>
<span class="token keyword">const</span> isBind <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 1. 头部 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LoginHeader</span><span class="token punctuation">&gt;</span></span>联合登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LoginHeader</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 2. 主体 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 2.1 tab 头部 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
        <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isBind = true<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ active: isBind === true }<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-bind<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>已有小兔鲜账号，请绑定手机<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
        <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isBind = false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ active: isBind === false }<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-edit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>没有小兔鲜账号，请完善资料<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 2.2 tab 内容 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>KeepAlive</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span>
          <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isBind ? CallbackBind : CallbackRegister<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>KeepAlive</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 3. 底部 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LoginFooter</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="qq头像和昵称渲染"><a href="#qq头像和昵称渲染" class="header-anchor">#</a> QQ头像和昵称渲染</h3> <p><img src="/vuepress-starter/assets/img/image-20220222213959584.6660310b.png" alt="image-20220222213959584"></p> <h4 id="ts类型声明文件"><a href="#ts类型声明文件" class="header-anchor">#</a> TS类型声明文件</h4> <p>新建文件：<code>src\types\api\qq.d.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>
  ret<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  msg<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  is_lost<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  nickname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  gender<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  gender_type<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  province<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  city<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  year<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  constellation<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  figureurl<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  figureurl_1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  figureurl_2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  figureurl_qq_1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  figureurl_qq_2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  figureurl_qq<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  figureurl_type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  is_yellow_vip<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  vip<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  yellow_vip_level<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  level<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  is_yellow_year_vip<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">QQUserInfo</span> <span class="token punctuation">{</span>
  status<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  fmt<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  ret<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  data<span class="token operator">:</span> Data<span class="token punctuation">;</span>
  seq<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  dataText<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>统一出口导出 <code>src\types\index.d.ts</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code>// 统一导出所有自定义的类型文件
export * from &quot;./api/home&quot;;
export * from &quot;./api/category&quot;;
export * from &quot;./api/goods&quot;;
export * from &quot;./api/member&quot;;
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">export * from &quot;./api/qq&quot;;
</span></span>
</code></pre></div><h4 id="渲染用户信息"><a href="#渲染用户信息" class="header-anchor">#</a> 渲染用户信息</h4> <ul><li>父组件传递属性</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script setup lang=&quot;ts&quot;&gt;
</span></span>// ...
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { ref } from &quot;vue&quot;;
</span><span class="token prefix inserted">+</span><span class="token line">import type { QQUserInfo } from &quot;@/types&quot;;
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const userInfo = ref&lt;QQUserInfo&gt;();
</span></span>// 1. 检查用户是否已登录
if (QC.Login.check()) {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // 2. 获取 QQ 用户唯一标识 openId
</span><span class="token prefix unchanged"> </span><span class="token line"> QC.Login.getMe((openId) =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">   console.log(&quot;openId&quot;, openId);
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span><span class="token prefix unchanged"> </span><span class="token line"> // 3. 获取用户资料
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  QC.api(&quot;get_user_info&quot;).success((res: unknown) =&gt; {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  QC.api(&quot;get_user_info&quot;).success((res: QQUserInfo) =&gt; {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // console.log(&quot;获取用户资料&quot;, res);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    userInfo.value = res;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> });
</span></span>}

const isBind = ref(true);
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 2.2 tab 内容 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;tab-content&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;KeepAlive&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;component
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          :user-info=&quot;userInfo&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         :is=&quot;isBind ? CallbackBind : CallbackRegister&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/KeepAlive&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/section&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span></code></pre></div><ul><li>子组件渲染</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> type <span class="token punctuation">{</span> QQUserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/types&quot;</span><span class="token punctuation">;</span>

defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  userInfo<span class="token operator">?</span><span class="token operator">:</span> QQUserInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 🚨防止控制台报错，QQ用户信息没回来不渲染 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo?.data.figureurl_2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
        Hi，{{ userInfo?.data.nickname }}
        欢迎来小兔鲜，完成绑定后可以QQ账号一键登录哦~
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="qq三方登录-多状态介绍"><a href="#qq三方登录-多状态介绍" class="header-anchor">#</a> QQ三方登录 - 多状态介绍</h2> <blockquote><p>回跳地址这样一个组件内做判断态，分以下 3 种状态。</p></blockquote> <p>状态1：已经有账号并且已经绑定 <code>qq</code>  直接获取用户信息，并直接跳转。</p> <p>状态2：<code>QQ</code> 绑定某个已注册账号，绑定成功后，获取用户信息，再跳转。</p> <p>状态3：注册全新账号并绑定 <code>QQ</code>，注册成功后，获取用户信息，再跳转。</p> <p><img src="/vuepress-starter/assets/img/image-20220222213459020.59829aba.png" alt="image-20220222213459020"></p> <h2 id="有账号未绑定-绑定测试账号-🚨🚨"><a href="#有账号未绑定-绑定测试账号-🚨🚨" class="header-anchor">#</a> 有账号未绑定 （绑定测试账号）🚨🚨</h2> <blockquote><p>目标：把自己的 <code>QQ</code> 信息 绑定到某个测试账号中。</p></blockquote> <p><img src="/vuepress-starter/assets/img/image-20220222215020282.39ed05b5.png" alt="image-20220222215020282"></p> <blockquote><p>🔔温馨提示：如果测试账号已被绑定的，手动调用一下解绑被占用的测试手机号。</p> <p><a href="http://pcapi-xiaotuxian-front-devtest.itheima.net/login/social/unbind?mobile=%E6%B5%8B%E8%AF%95%E6%89%8B%E6%9C%BA%E5%8F%B7" target="_blank" rel="noopener noreferrer">http://pcapi-xiaotuxian-front-devtest.itheima.net/login/social/unbind?mobile=测试手机号<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>实现思路</strong></p> <ol><li>进行手机号码校验</li> <li>进行短信验证码发送 （🚨必须调用接口，验证码接口比较多，要看清楚后再调用）</li> <li>进行绑定，完成后把当前用户数据存入<code>Pinia</code>，跳转到首页</li></ol> <h3 id="手机号码校验"><a href="#手机号码校验" class="header-anchor">#</a> 手机号码校验</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components/XtxUI&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> QQUserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  userInfo<span class="token operator">?</span><span class="token operator">:</span> QQUserInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备表单数据</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&quot;13535337057&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 发送验证码</span>
<span class="token keyword">const</span> <span class="token function-variable function">sendCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3-9]\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;warn&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;手机号码格式错误~&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;可以发送验证码~&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>模板绑定</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span>...
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;input
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          v-model=&quot;form.mobile&quot;
</span><span class="token prefix inserted">+</span><span class="token line">          maxlength=&quot;11&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         class=&quot;input&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         type=&quot;text&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         placeholder=&quot;绑定的手机号&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       /&gt;
</span></span>...
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;input
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          v-model=&quot;form.code&quot;
</span><span class="token prefix inserted">+</span><span class="token line">          maxlength=&quot;6&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         class=&quot;input&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         type=&quot;text&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         placeholder=&quot;短信验证码&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       /&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;span class=&quot;code&quot; @click=&quot;sendCode&quot;&gt;发送验证码&lt;/span&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...  
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span></code></pre></div><h3 id="验证码按钮倒计时效果"><a href="#验证码按钮倒计时效果" class="header-anchor">#</a> 验证码按钮倒计时效果</h3> <blockquote><p>自己补充</p></blockquote> <h3 id="发送验证码业务"><a href="#发送验证码业务" class="header-anchor">#</a> 发送验证码业务</h3> <blockquote><p>🚨注意：这个发送的动作必须要有！也就是接口必须要调用才可以绑定。</p></blockquote> <p><strong>接口文档：三方登录_发送已有账号短信</strong></p> <p><strong>Path：</strong> /login/social/code</p> <p><strong>Method：</strong> GET</p> <p><strong>请求参数</strong></p> <p><strong>Query</strong></p> <table><thead><tr><th>参数名称</th> <th>是否必须</th> <th>示例</th> <th>备注</th></tr></thead> <tbody><tr><td>mobile</td> <td>否</td> <td>13211112222</td> <td>手机号</td></tr></tbody></table> <p>参考代码</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components/XtxUI&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useStore <span class="token keyword">from</span> <span class="token string">&quot;@/store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> QQUserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  userInfo<span class="token operator">?</span><span class="token operator">:</span> QQUserInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备表单响应式数据</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&quot;13012345764&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> member <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送验证码按钮</span>
<span class="token keyword">const</span> <span class="token function-variable function">sendCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 进行手机号格式校验</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3-9]\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 校验不通过，提醒用户</span>
    <span class="token keyword">return</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;warn&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;手机号码格式错误~&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 2. 调用获取验证码接口</span>
  <span class="token keyword">await</span> member<span class="token punctuation">.</span><span class="token function">getCodeBind</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="unionid-参数父传子"><a href="#unionid-参数父传子" class="header-anchor">#</a> unionId 参数父传子</h3> <blockquote><p>目标：把 <code>unionId</code> 参数传递给子组件，作为 <code>QQ</code> 登录接口其中一个参数。</p></blockquote> <p>父组件：<code>src\views\Login\callback.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script setup lang=&quot;ts&quot;&gt;
</span></span>...
const userInfo = ref&lt;QQUserInfo&gt;();
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const unionId = ref(&quot;&quot;);
</span></span>// 1. 检查用户是否已登录
if (QC.Login.check()) {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // 2. 获取 QQ 用户唯一标识 openId
</span><span class="token prefix unchanged"> </span><span class="token line"> QC.Login.getMe((openId) =&gt; {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    unionId.value = openId;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> });
</span><span class="token prefix unchanged"> </span><span class="token line"> // 3. 获取用户资料
</span><span class="token prefix unchanged"> </span><span class="token line"> QC.api(&quot;get_user_info&quot;).success((res: QQUserInfo) =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">   userInfo.value = res;
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;section class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 2.2 tab 内容 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;tab-content&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;KeepAlive&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;component
</span><span class="token prefix unchanged"> </span><span class="token line">         :userInfo=&quot;userInfo&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          :unionId=&quot;unionId&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         :is=&quot;isBind ? CallbackBind : CallbackRegister&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/KeepAlive&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/section&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> ...
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span></code></pre></div><p>子组件：<code>src\views\Login\components\callback-bind.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script setup lang=&quot;ts&quot;&gt;
</span></span>defineProps&lt;{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> userInfo?: QQUserInfo;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  unionId: string;
</span></span>}&gt;();
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><h3 id="qq登录并绑定手机号"><a href="#qq登录并绑定手机号" class="header-anchor">#</a> QQ登录并绑定手机号</h3> <p><strong>接口文档：三方登录_账号绑定</strong></p> <p><strong>Path：</strong> /login/social/bind</p> <p><strong>Method：</strong> POST</p> <p><strong>请求参数</strong></p> <p><strong>Body</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>是否必须</th> <th>默认值</th> <th>备注</th> <th>其他信息</th></tr></thead> <tbody><tr><td>unionId</td> <td>string</td> <td>必须</td> <td></td> <td>三方标识</td> <td>QQ登录后的 openId</td></tr> <tr><td>mobile</td> <td>string</td> <td>必须</td> <td></td> <td>手机号</td> <td></td></tr> <tr><td>code</td> <td>string</td> <td>必须</td> <td></td> <td>验证码</td> <td></td></tr></tbody></table> <p><strong>Pinia 定义</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> http <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/utils/request&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Profile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components/XtxUI&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 📌在非 .vue 组件文件中，可通过导入 router 直接获取路由实例</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;@/router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  clearStorageProfile<span class="token punctuation">,</span>
  getStorageProfile<span class="token punctuation">,</span>
  saveStorageProfile<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/utils/storage&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;member&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 🚨使用插件遇到小问题，自己手写本地存储</span>
  <span class="token comment">// persist: true,</span>
  <span class="token comment">// 状态</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 用户资料</span>
    profile<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Profile<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 方法</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 登录成功后的复用逻辑封装</span>
    <span class="token function">loginSuccess</span><span class="token punctuation">(</span>profile<span class="token operator">:</span> Profile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 提示</span>
      <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'登录成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 2. 存储数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>profile <span class="token operator">=</span> profile<span class="token punctuation">;</span>
      <span class="token comment">// 🔔获取目标页面 target，如果没有目标页，则设置默认值 '/' 去首页</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> target <span class="token operator">=</span> <span class="token string">'/'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>value<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
      <span class="token comment">// 3. 跳转页面</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>target <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 用户名密码登录</span>
    <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token punctuation">{</span> account<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> password<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 发送请求</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">http</span><span class="token generic class-name"><span class="token operator">&lt;</span>Profile<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 调用登录成功后的逻辑</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginSuccess</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 退出登录</span>
    <span class="token keyword">async</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 提示</span>
      <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'退出成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 2. 清空用户信息</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>profile <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Profile<span class="token punctuation">;</span>
      <span class="token comment">// 3. 跳转页面</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 三方登录_账号绑定  /login/social/bind</span>
    <span class="token keyword">async</span> <span class="token function">loginBind</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token punctuation">{</span> unionId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> mobile<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> code<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 发送请求</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">http</span><span class="token generic class-name"><span class="token operator">&lt;</span>Profile<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/login/social/bind&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 调用登录成功后的逻辑</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginSuccess</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 获取三方登录验证码  /login/social/code</span>
    <span class="token keyword">async</span> <span class="token function">loginBindGetCode</span><span class="token punctuation">(</span>mobile<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 🚨注意接口：三方登录_发送已有账号短信</span>
      <span class="token keyword">await</span> <span class="token function">http</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'/login/social/code'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> mobile<span class="token operator">:</span> mobile <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 🔔温馨提醒：验证码是发送到用户手机上的</span>
      <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'验证码发送成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useMemberStore<span class="token punctuation">;</span>

</code></pre></div><h3 id="qq-三方登录回跳处理"><a href="#qq-三方登录回跳处理" class="header-anchor">#</a> QQ 三方登录回跳处理</h3> <p>🔔遇到问题：<code>QQ</code>三方登录无法实现回跳，如何解决？</p> <blockquote><p>目标：把路由的 <code>target</code> 目标页传递给 <code>QQ</code> 登录页，实现 <code>QQ</code> 登录后回跳。</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
        <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`https://graph.qq.com/oauth2.0/authorize?client_id=100556005&amp;response_type=token&amp;scope=all&amp;redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback?target=${$route.query.target || '/'}`<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="有账号已绑定-qq登录直接跳转-🚨"><a href="#有账号已绑定-qq登录直接跳转-🚨" class="header-anchor">#</a> 有账号已绑定 （QQ登录直接跳转）🚨</h2> <blockquote><p>目标：<code>QQ</code>登录成功后，直接跳转。</p></blockquote> <p><strong>实现思路</strong></p> <ol><li>回跳组件初始化的时候，获取openId  （openId =&gt; 对应用户身份 - QQ返回的唯一id身份标识）</li> <li>根据 <code>openId</code> 去自己后台尝试进行 <strong>直接登录</strong></li> <li>如果成功，就代表已注册已绑定，记录返回的用户信息，跳转到首页或者来源页面</li></ol> <p><strong>接口描述：三方直接登录</strong></p> <p><strong>Path：</strong> /login/social</p> <p><strong>Method：</strong> POST</p> <p><strong>请求参数</strong></p> <p><strong>Body</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>是否必须</th> <th>备注</th></tr></thead> <tbody><tr><td>unionId</td> <td>string</td> <td>必须</td> <td>三方标识</td></tr> <tr><td>source</td> <td>integer</td> <td>必须</td> <td>注册来源 注册来源，1为pc，2为webapp，3为微信小程序，4为Android，5为ios,6为qq,7为微信</td></tr></tbody></table> <p><strong>代码落地</strong></p> <p>1）准备使用QQ uionId进行应用登录的接口</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;member&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">// 方法</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// QQ直接登录</span>
    <span class="token keyword">async</span> <span class="token function">loginQQUnionId</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">unionId</span><span class="token operator">:</span> string<span class="token punctuation">;</span> source<span class="token operator">:</span> number <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token operator">&lt;</span>Profile<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/login/social&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// console.log(&quot;POST&quot;, &quot;/login/social&quot;, res.data.result);</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>profile <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useMemberStore<span class="token punctuation">;</span>

</code></pre></div><p>调用</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script setup lang=&quot;ts&quot;&gt;
</span></span>...
// 1. 检查用户是否已登录
if (QC.Login.check()) {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // 2. 获取 QQ 用户唯一标识 openId
</span><span class="token prefix unchanged"> </span><span class="token line"> QC.Login.getMe((openId) =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">   console.log(&quot;openId&quot;, openId);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // 🚨 获取 openId 后，尝试直接登录
</span><span class="token prefix inserted">+</span><span class="token line">    member.loginQQUnionId({ unionId: openId, source: 6 });
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   unionId.value = openId;
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span><span class="token prefix unchanged"> </span><span class="token line"> // 3. 获取用户资料
</span><span class="token prefix unchanged"> </span><span class="token line"> QC.api(&quot;get_user_info&quot;).success((res: QQUserInfo) =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">   // console.log(&quot;获取用户资料&quot;, res.data);
</span><span class="token prefix unchanged"> </span><span class="token line">   userInfo.value = res;
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><p>可以考虑升级成枚举</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 1为pc，2为webapp，3为微信小程序，4为Android，5为ios,6为qq,7为微信</span>
<span class="token keyword">enum</span> LoginSource <span class="token punctuation">{</span>
  <span class="token constant">PC</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  WebApp<span class="token punctuation">,</span>
  MiniProgram<span class="token punctuation">,</span>
  Android<span class="token punctuation">,</span>
  <span class="token constant">IOS</span><span class="token punctuation">,</span>
  <span class="token constant">QQ</span><span class="token punctuation">,</span>
  WeChat<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="无账号未绑定-注册登录-课后作业"><a href="#无账号未绑定-注册登录-课后作业" class="header-anchor">#</a> 无账号未绑定 （注册登录-课后作业）</h2> <blockquote><p>说明：业务流程和绑定测试账号流程几乎一致，表单校验，发送验证码，绑定 <code>openId</code> 实现注册登录。</p> <p>🚨温馨提示：一个手机号和一个 <code>QQ</code> 号只能 注册并绑定一次。</p> <ul><li>如果<code>QQ</code>号已绑定某个手机号，手动调用一下解绑接口。</li></ul> <p>http://pcapi-xiaotuxian-front-devtest.itheima.net/login/social/unbind?mobile=手机号</p> <ul><li>如果手机号已被使用，更换新的手机号，建议记到小本本上，否则无法找回。</li></ul></blockquote> <p><img src="/vuepress-starter/assets/img/11-1628025535476.5c8e793f.png" alt=""></p> <h3 id="接口三方登录-注册登录"><a href="#接口三方登录-注册登录" class="header-anchor">#</a> 接口三方登录-注册登录</h3> <p><strong>Path：</strong> /login/social/:unionId/complement</p> <p><strong>Method：</strong> POST</p> <p><strong>路径参数</strong></p> <table><thead><tr><th>参数名称</th> <th>示例</th> <th>备注</th></tr></thead> <tbody><tr><td>unionId</td> <td>megasuiscool</td> <td>unionId</td></tr></tbody></table> <p><strong>Body</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>是否必须</th> <th>默认值</th> <th>备注</th> <th>其他信息</th></tr></thead> <tbody><tr><td>account</td> <td>string</td> <td>必须</td> <td></td> <td></td> <td></td></tr> <tr><td>mobile</td> <td>string</td> <td>必须</td> <td></td> <td></td> <td></td></tr> <tr><td>code</td> <td>string</td> <td>必须</td> <td></td> <td></td> <td></td></tr> <tr><td>password</td> <td>string</td> <td>必须</td> <td></td> <td></td> <td></td></tr></tbody></table> <h2 id="倒计时逻辑函数封装-课后练习"><a href="#倒计时逻辑函数封装-课后练习" class="header-anchor">#</a> 倒计时逻辑函数封装-课后练习</h2> <blockquote><p>封装一个通用的倒计时逻辑函数 <code>useCountDown</code></p></blockquote> <p><strong>需求描述</strong></p> <ol><li><p>支持自定义参数传入定制倒计时初始值</p> <p>eg: <code>useCountDown(60)</code></p></li> <li><p>返回当前计数/暂停计时方法/开始计时方法供业务使用</p> <p>eg: <code>const {countTime, start, pause} = useCountDown(60)</code></p></li></ol> <p><strong>逻辑实现</strong></p> <blockquote><p>参考文档：<a href="https://vueuse.org/shared/useintervalfn/" target="_blank" rel="noopener noreferrer">https://vueuse.org/shared/useintervalfn/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>核心逻辑：每隔一秒钟，对 countTime 进行减 1 操作</p> <ol><li>resume：可执行函数，开启定时器，每隔一个时间执行一次</li> <li>pause： 可执行函数，只要执行这个函数，定时器就会暂停</li></ol> <h3 id="组件中写法"><a href="#组件中写法" class="header-anchor">#</a> 组件中写法</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useIntervalFn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    
<span class="token keyword">const</span> countTime <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> pause<span class="token punctuation">,</span> resume <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntervalFn</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    countTime<span class="token punctuation">.</span>value<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>countTime<span class="token punctuation">.</span>value <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> im<span class="token punctuation">.</span><span class="token operator">/</span>mediate<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  countTime<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>
  <span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ countTime }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>start<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>开始定时器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pause<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>暂停定时器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resume<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>继续定时器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="封装成-hooks-钩子函数"><a href="#封装成-hooks-钩子函数" class="header-anchor">#</a> 封装成 hooks 钩子函数</h3> <p>在 <code>src\hooks\index.ts</code> 文件中新增以下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 倒计时效果
 * @param startTime  初始化时间
 * @returns count    倒计时秒数
 * @returns start    初始化启动
 * @returns resume   继续启动
 * @returns pause    暂停(清理定时器)
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useCountDown</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">startTime <span class="token operator">=</span> <span class="token number">60</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 倒计时秒数</span>
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// resume  继续启动</span>
  <span class="token comment">// pause   暂停(清理定时器)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> resume<span class="token punctuation">,</span> pause <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntervalFn</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 倒计时减少</span>
      count<span class="token punctuation">.</span>value<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token comment">// 倒计时结束</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>count<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token comment">// 不需要立即执行</span>
    <span class="token punctuation">{</span> im<span class="token punctuation">.</span><span class="token operator">/</span>mediate<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 初始化启动函数</span>
  <span class="token keyword">const</span> <span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 倒计时</span>
    count<span class="token punctuation">.</span>value <span class="token operator">=</span> startTime<span class="token punctuation">;</span>
    <span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// count   倒计时秒数</span>
  <span class="token comment">// start   初始化启动</span>
  <span class="token comment">// resume  继续启动</span>
  <span class="token comment">// pause   暂停(清理定时器)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> resume<span class="token punctuation">,</span> pause<span class="token punctuation">,</span> start <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>test 组件测试</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCountDown <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/hooks'</span><span class="token punctuation">;</span>
<span class="token comment">// 封装后调用很方便</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> start<span class="token punctuation">,</span> pause<span class="token punctuation">,</span> resume<span class="token punctuation">,</span> count <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCountDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello vue3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>start<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>初始化启动<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pause<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>暂停<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resume<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>继续启动<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="课后应用"><a href="#课后应用" class="header-anchor">#</a> 课后应用</h3> <ul><li>自己把封装的倒计时 hooks 钩子函数，整合到发送验证码业务中。</li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/vuepress-starter/handbook/vueRabbitTs/04-详情模块.html" class="prev">
          详情模块
        </a></span> <span class="next"><a href="/vuepress-starter/handbook/vueRabbitTs/06-购物车模块.html">
          购物车模块
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#路由与组件" class="sidebar-link reco-side-路由与组件" data-v-b57cc07c>路由与组件</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#结构布局-cv" class="sidebar-link reco-side-结构布局-cv" data-v-b57cc07c>结构布局-CV</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#表单布局-cv" class="sidebar-link reco-side-表单布局-cv" data-v-b57cc07c>表单布局-CV</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#消息提示组件-和-复选框组件" class="sidebar-link reco-side-消息提示组件-和-复选框组件" data-v-b57cc07c>消息提示组件 和 复选框组件</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#组件外观" class="sidebar-link reco-side-组件外观" data-v-b57cc07c>组件外观</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#xtxcheckbox-组件使用" class="sidebar-link reco-side-xtxcheckbox-组件使用" data-v-b57cc07c>XtxCheckBox 组件使用</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#message-组件使用" class="sidebar-link reco-side-message-组件使用" data-v-b57cc07c>Message 组件使用</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#登录前表单校验" class="sidebar-link reco-side-登录前表单校验" data-v-b57cc07c>登录前表单校验</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#参考代码" class="sidebar-link reco-side-参考代码" data-v-b57cc07c>参考代码</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#会员-pinia-状态管理" class="sidebar-link reco-side-会员-pinia-状态管理" data-v-b57cc07c>会员 Pinia 状态管理</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#新建-strore" class="sidebar-link reco-side-新建-strore" data-v-b57cc07c>新建 Strore</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#合并-store" class="sidebar-link reco-side-合并-store" data-v-b57cc07c>合并 Store</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#账户登录实现" class="sidebar-link reco-side-账户登录实现" data-v-b57cc07c>账户登录实现</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#用户名和密码登录接口" class="sidebar-link reco-side-用户名和密码登录接口" data-v-b57cc07c>用户名和密码登录接口</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#发送登录请求" class="sidebar-link reco-side-发送登录请求" data-v-b57cc07c>发送登录请求</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#定义ts类型" class="sidebar-link reco-side-定义ts类型" data-v-b57cc07c>定义TS类型</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#持久化存储" class="sidebar-link reco-side-持久化存储" data-v-b57cc07c>持久化存储</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#用户信息渲染" class="sidebar-link reco-side-用户信息渲染" data-v-b57cc07c>用户信息渲染</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#退出登录实现" class="sidebar-link reco-side-退出登录实现" data-v-b57cc07c>退出登录实现</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#优化-登录成功页面回跳" class="sidebar-link reco-side-优化-登录成功页面回跳" data-v-b57cc07c>优化：登录成功页面回跳</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#请求拦截器和响应拦截器" class="sidebar-link reco-side-请求拦截器和响应拦截器" data-v-b57cc07c>请求拦截器和响应拦截器</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#请求拦截器-请求成功携带-token" class="sidebar-link reco-side-请求拦截器-请求成功携带-token" data-v-b57cc07c>请求拦截器 - 请求成功携带 token</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#响应拦截器-请求失败提示用户" class="sidebar-link reco-side-响应拦截器-请求失败提示用户" data-v-b57cc07c>响应拦截器 - 请求失败提示用户</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq三方登录-前置环境和交互" class="sidebar-link reco-side-qq三方登录-前置环境和交互" data-v-b57cc07c>QQ三方登录 - 前置环境和交互</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#登录简要流程梳理" class="sidebar-link reco-side-登录简要流程梳理" data-v-b57cc07c>登录简要流程梳理</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#申请流程" class="sidebar-link reco-side-申请流程" data-v-b57cc07c>申请流程</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#常见疑问❓" class="sidebar-link reco-side-常见疑问❓" data-v-b57cc07c>常见疑问❓</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq三方登录-电脑环境设置🚨" class="sidebar-link reco-side-qq三方登录-电脑环境设置🚨" data-v-b57cc07c>QQ三方登录-电脑环境设置🚨</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#核心步骤" class="sidebar-link reco-side-核心步骤" data-v-b57cc07c>核心步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#第一步-修改-vite-配置" class="sidebar-link reco-side-第一步-修改-vite-配置" data-v-b57cc07c>第一步：修改 vite 配置</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#第二步-修改-host-文件" class="sidebar-link reco-side-第二步-修改-host-文件" data-v-b57cc07c>第二步：修改 host 文件</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#关键步骤验证" class="sidebar-link reco-side-关键步骤验证" data-v-b57cc07c>关键步骤验证</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#dns-解析概念-了解" class="sidebar-link reco-side-dns-解析概念-了解" data-v-b57cc07c>DNS 解析概念 - 了解</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#回跳页面路由准备" class="sidebar-link reco-side-回跳页面路由准备" data-v-b57cc07c>回跳页面路由准备</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#配置路由和组件" class="sidebar-link reco-side-配置路由和组件" data-v-b57cc07c>配置路由和组件</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq授权登录实现" class="sidebar-link reco-side-qq授权登录实现" data-v-b57cc07c>QQ授权登录实现</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#按钮跳转实现" class="sidebar-link reco-side-按钮跳转实现" data-v-b57cc07c>按钮跳转实现</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq互联核心-api" class="sidebar-link reco-side-qq互联核心-api" data-v-b57cc07c>QQ互联核心 API</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#项目中需要用到的-3-个-api" class="sidebar-link reco-side-项目中需要用到的-3-个-api" data-v-b57cc07c>项目中需要用到的 3 个 API</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#eslint-添全局变量" class="sidebar-link reco-side-eslint-添全局变量" data-v-b57cc07c>ESlint 添全局变量</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#ts-类型声明文件" class="sidebar-link reco-side-ts-类型声明文件" data-v-b57cc07c>TS 类型声明文件</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#测试" class="sidebar-link reco-side-测试" data-v-b57cc07c>测试</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#回跳组件静态结构" class="sidebar-link reco-side-回跳组件静态结构" data-v-b57cc07c>回跳组件静态结构</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#静态结构" class="sidebar-link reco-side-静态结构" data-v-b57cc07c>静态结构</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#完成切换交互" class="sidebar-link reco-side-完成切换交互" data-v-b57cc07c>完成切换交互</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq头像和昵称渲染" class="sidebar-link reco-side-qq头像和昵称渲染" data-v-b57cc07c>QQ头像和昵称渲染</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq三方登录-多状态介绍" class="sidebar-link reco-side-qq三方登录-多状态介绍" data-v-b57cc07c>QQ三方登录 - 多状态介绍</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#有账号未绑定-绑定测试账号-🚨🚨" class="sidebar-link reco-side-有账号未绑定-绑定测试账号-🚨🚨" data-v-b57cc07c>有账号未绑定 （绑定测试账号）🚨🚨</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#手机号码校验" class="sidebar-link reco-side-手机号码校验" data-v-b57cc07c>手机号码校验</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#验证码按钮倒计时效果" class="sidebar-link reco-side-验证码按钮倒计时效果" data-v-b57cc07c>验证码按钮倒计时效果</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#发送验证码业务" class="sidebar-link reco-side-发送验证码业务" data-v-b57cc07c>发送验证码业务</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#unionid-参数父传子" class="sidebar-link reco-side-unionid-参数父传子" data-v-b57cc07c>unionId 参数父传子</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq登录并绑定手机号" class="sidebar-link reco-side-qq登录并绑定手机号" data-v-b57cc07c>QQ登录并绑定手机号</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#qq-三方登录回跳处理" class="sidebar-link reco-side-qq-三方登录回跳处理" data-v-b57cc07c>QQ 三方登录回跳处理</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#有账号已绑定-qq登录直接跳转-🚨" class="sidebar-link reco-side-有账号已绑定-qq登录直接跳转-🚨" data-v-b57cc07c>有账号已绑定 （QQ登录直接跳转）🚨</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#无账号未绑定-注册登录-课后作业" class="sidebar-link reco-side-无账号未绑定-注册登录-课后作业" data-v-b57cc07c>无账号未绑定 （注册登录-课后作业）</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#接口三方登录-注册登录" class="sidebar-link reco-side-接口三方登录-注册登录" data-v-b57cc07c>接口三方登录-注册登录</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#倒计时逻辑函数封装-课后练习" class="sidebar-link reco-side-倒计时逻辑函数封装-课后练习" data-v-b57cc07c>倒计时逻辑函数封装-课后练习</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#组件中写法" class="sidebar-link reco-side-组件中写法" data-v-b57cc07c>组件中写法</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#封装成-hooks-钩子函数" class="sidebar-link reco-side-封装成-hooks-钩子函数" data-v-b57cc07c>封装成 hooks 钩子函数</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-starter/handbook/vueRabbitTs/05-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97.html#课后应用" class="sidebar-link reco-side-课后应用" data-v-b57cc07c>课后应用</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 TS文档
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div></div></div>
    <script src="/vuepress-starter/assets/js/app.b20a56ac.js" defer></script><script src="/vuepress-starter/assets/js/9.d0fd5d46.js" defer></script><script src="/vuepress-starter/assets/js/1.a4aa22ef.js" defer></script><script src="/vuepress-starter/assets/js/30.d6531e28.js" defer></script>
  </body>
</html>
