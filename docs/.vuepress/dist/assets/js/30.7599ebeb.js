(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1686:function(t,s,a){t.exports=a.p+"assets/img/image-20200714093601730.dd87ee68.png"},1687:function(t,s,a){t.exports=a.p+"assets/img/image-20200714142517337.62ad7679.png"},1688:function(t,s,a){t.exports=a.p+"assets/img/image-20200812023354631.483751d5.png"},1689:function(t,s,a){t.exports=a.p+"assets/img/image-20200827104724769.2d64f55a.png"},1690:function(t,s,a){t.exports=a.p+"assets/img/image-20200714172602305.3513a8ad.png"},1691:function(t,s){t.exports="data:image/png;base64,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"},1692:function(t,s,a){t.exports=a.p+"assets/img/image-20200716000203862.389fc0cc.png"},1693:function(t,s,a){t.exports=a.p+"assets/img/image-20200827111324564.4e3e3b86.png"},1694:function(t,s,a){t.exports=a.p+"assets/img/image-20200716004526838.de9299a9.png"},1695:function(t,s,a){t.exports=a.p+"assets/img/image-20200813013009294.fb3fe58c.png"},1696:function(t,s,a){t.exports=a.p+"assets/img/image-20200716012120619.7bd9c185.png"},1697:function(t,s){t.exports="data:image/png;base64,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"},1698:function(t,s,a){t.exports=a.p+"assets/img/image-20200827143847893.37c9389f.png"},1699:function(t,s,a){t.exports=a.p+"assets/img/image-20200716231205153.458b7daf.png"},1700:function(t,s,a){t.exports=a.p+"assets/img/image-20200818155842864.dd19105d.png"},1701:function(t,s,a){t.exports=a.p+"assets/img/image-20200827152601712.a24a90a4.png"},2045:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"主页的token拦截处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主页的token拦截处理"}},[t._v("#")]),t._v(" 主页的token拦截处理")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("目标")])]),t._v("：根据token处理主页的访问权限问题")]),t._v(" "),s("h3",{attrs:{id:"权限拦截的流程图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权限拦截的流程图"}},[t._v("#")]),t._v(" 权限拦截的流程图")]),t._v(" "),s("blockquote",[s("p",[t._v("我们已经完成了登录的过程，并且存储了token，但是此时主页并没有因为token的有无而被控制访问权限")])]),t._v(" "),s("p",[t._v("接下来我们需要实现以下如下的流程图")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1686),alt:"image-20200714093601730"}})]),t._v(" "),s("blockquote",[s("p",[t._v("在基础框架阶段，我们已经知道**"),s("code",[t._v("src/permission.js")]),t._v("**是专门处理路由权限的，所以我们在这里处理")])]),t._v(" "),s("h3",{attrs:{id:"流程图转化代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程图转化代码"}},[t._v("#")]),t._v(" 流程图转化代码")]),t._v(" "),s("p",[s("strong",[t._v("流程图转化的代码")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 权限拦截 导航守卫 路由守卫  router")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/router'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入路由实例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/store'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入vuex store实例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" NProgress "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nprogress'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入一份进度条插件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nprogress/nprogress.css'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入进度条样式")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" whiteList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/404'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义白名单  所有不受权限控制的页面")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路由的前置守卫")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  NProgress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开启进度条")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  首先判断有无token")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   如果有token 继续判断是不是去登录页")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  表示去的是登录页")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳到主页")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 直接放行")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果没有token")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("whiteList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果找到了 表示在在名单里面")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳到登录页")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  NProgress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("done")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手动强制关闭一次  为了解决 手动切换地址时  进度条的不关闭的问题")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 后置守卫")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  NProgress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("done")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭进度条")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("blockquote",[s("p",[t._v("在导航守卫的位置，我们添加了NProgress的插件，可以完成进入时的进度条效果")])]),t._v(" "),s("p",[s("strong",[t._v("提交代码")])]),t._v(" "),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("：完成主页中根据有无token，进行页面访问的处理")]),t._v(" "),s("h2",{attrs:{id:"主页的左侧导航样式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主页的左侧导航样式"}},[t._v("#")]),t._v(" 主页的左侧导航样式")]),t._v(" "),s("p",[t._v("**"),s("code",[t._v("目标")]),t._v("**设置左侧的导航样式")]),t._v(" "),s("blockquote",[s("p",[t._v("接下来我们需要将左侧导航设置成如图样式")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1687),alt:"image-20200714142517337"}})]),t._v(" "),s("blockquote",[s("p",[t._v("主页的布局组件位置**"),s("code",[t._v("src/layout")]),t._v("**")])]),t._v(" "),s("p",[s("strong",[t._v("主页布局架构")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1688),alt:"image-20200812023354631"}})]),t._v(" "),s("p",[s("strong",[t._v("左侧导航组件的样式文件")]),s("code",[t._v("styles/siderbar.scss")])]),t._v(" "),s("p",[s("strong",[t._v("设置背景渐变色")])]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".sidebar-container")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("-webkit-linear-gradient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bottom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" #3d6df8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" #5b8cff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("设置左侧导航背景图片")])]),t._v(" "),s("div",{staticClass:"language-scss extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scss"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".scrollbar-wrapper ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token url"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'~@/./assets/common/leftnavBg.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" no-repeat 0 100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[s("code",[t._v("注意")])]),t._v("：在scss中，如果我们想要使用**"),s("code",[t._v("@")]),s("strong",[t._v("别名，需要在前面加上一个")]),s("code",[t._v("~")]),t._v("**才可以")]),t._v(" "),s("p",[s("strong",[t._v("设置菜单选中颜色")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("    .el-menu "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      border: none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      height: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      width: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("important"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        li"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          .svg-icon"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            color: "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fff;")]),t._v("\n            font-size: 18px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            vertical-align: middle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            .icon"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              color:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fff;")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          span"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            color: "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fff;")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(":hover"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            .svg-icon"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              color: "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#43a7fe")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            span"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              color: "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#43a7fe;")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[s("code",[t._v("注意")])]),t._v("：因为我们后期没有二级菜单，所以这里暂时不用对二级菜单的样式进行控制")]),t._v(" "),s("p",[s("strong",[t._v("显示左侧logo图片")]),t._v(" "),s("strong",[s("code",[t._v("src/setttings.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("title")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'人力资源管理平台'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * @type {boolean} true | false\n   * @description Whether fix the header\n   */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fixedHeader")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * @type {boolean} true | false\n   * @description Whether show the logo in sidebar\n   */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sidebarLogo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示logo")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[s("strong",[t._v("设置头部图片结构")]),t._v(" "),s("strong",[s("code",[t._v("src/layout/components/Sidebar/Logo.vue")])])]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sidebar-logo-container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{'collapse':collapse}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("transition")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sidebarLogoFade"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("collapse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sidebar-logo-link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@/./assets/common/logo.png"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sidebar-logo  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("transition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("设置大图和小图的样式")])]),t._v(" "),s("div",{staticClass:"language-scss extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scss"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token selector"}},[s("span",{pre:!0,attrs:{class:"token parent important"}},[t._v("&")]),t._v(".collapse ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".sidebar-logo ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-right")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 32px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 32px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小图样式")]),t._v("\n")])])]),s("div",{staticClass:"language-scss extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scss"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".sidebar-logo ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 140px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("vertical-align")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" middle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-right")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 12px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 大图样式")]),t._v("\n")])])]),s("p",[s("strong",[t._v("去除logo的背景色")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1689),alt:"image-20200827104724769"}})]),t._v(" "),s("p",[s("strong",[t._v("提交代码")])]),t._v(" "),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("： 完成主页的左侧导航样式")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("本节注意")])]),t._v("：我们该项目中没有二级显示菜单，所以二级菜单的样式并没有做过多处理，同学们不必在意")]),t._v(" "),s("h2",{attrs:{id:"设置头部内容的布局和样式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置头部内容的布局和样式"}},[t._v("#")]),t._v(" 设置头部内容的布局和样式")]),t._v(" "),s("p",[t._v("**"),s("code",[t._v("目标")]),t._v("**设置头部内容的布局和样式")]),t._v(" "),s("blockquote",[s("p",[t._v("我们需要把页面设置成如图样式")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1690),alt:"image-20200714172602305"}})]),t._v(" "),s("p",[s("strong",[t._v("头部组件位置")]),t._v(" "),s("strong",[s("code",[t._v("layout/components/Navbar.vue")])])]),t._v(" "),s("p",[s("strong",[t._v("添加公司名称")]),t._v("，"),s("strong",[t._v("注释面包屑")])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app-breadcrumb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      江苏传智播客教育科技股份有限公司\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("breadBtn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("体验版"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!-- <breadcrumb class="breadcrumb-container" /> --\x3e')]),t._v("\n\n")])])]),s("p",[s("strong",[t._v("公司样式")])]),t._v(" "),s("div",{staticClass:"language-scss extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scss"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".app-breadcrumb ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" inline-block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 18px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("line-height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #ffffff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("cursor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".breadBtn ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #84a9fe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 14px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0 10px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" inline-block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("line-height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-radius")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 15px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("头部背景渐变色")])]),t._v(" "),s("div",{staticClass:"language-scss extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scss"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".navbar ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("-webkit-linear-gradient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" #3d6df8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" #5b8cff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("汉堡组件图标颜色")]),t._v(" "),s("strong",[s("code",[t._v("src/components/Hamburger/index.vue")])])]),t._v(" "),s("p",[s("strong",[s("code",[t._v("注意")]),s("strong",[t._v("这里的图标我们使用了")]),s("code",[t._v("svg")])]),t._v("，设置颜色需要使用svg标签的**"),s("code",[t._v("fill属性")]),t._v("**")]),t._v(" "),s("blockquote",[s("p",[t._v("设置svg图标为白色")])]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("svg")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{'is-active':isActive}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hamburger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("viewBox")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0 0 1024 1024"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2000/svg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("fill")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("#fff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("右侧下拉菜单设置")])]),t._v(" "),s("blockquote",[s("p",[t._v("将下拉菜单调节成**"),s("code",[t._v("首页/项目地址/退出登录")]),t._v("**")])]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("right-menu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-dropdown")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("avatar-container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("trigger")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("avatar-wrapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@/./assets/common/bigUserHeader.png"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user-avatar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("管理员"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("i")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("el-icon-caret-bottom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token special-attr"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token value css language-css"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("#fff")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-dropdown-menu")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("slot")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dropdown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user-dropdown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-dropdown-item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n              首页\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-dropdown-item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("_blank"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://gitee.com/shuiruohanyu/hrsaas53"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-dropdown-item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("项目地址"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-dropdown-item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-dropdown-item")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("divided")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click.native")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("logout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token special-attr"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token value css language-css"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("退出登录"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-dropdown-item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-dropdown-menu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-dropdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("头像和下拉菜单样式")])]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".user-avatar")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("cursor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pointer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-radius")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 15px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("vertical-align")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" middle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #fff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("vertical-align")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" middle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("5px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".user-dropdown")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #fff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("用户名和头像我们先用了假数据进行，下小章节，会进行这份数据的获取")]),t._v(" "),s("p",[s("strong",[t._v("最终效果")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(397),alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("提交代码")])]),t._v(" "),s("h2",{attrs:{id:"获取用户资料接口和token注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取用户资料接口和token注入"}},[t._v("#")]),t._v(" 获取用户资料接口和token注入")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("目标")])]),t._v(" 封装获取用户资料的资料信息")]),t._v(" "),s("blockquote",[s("p",[t._v("上小节中，我们完成了头部菜单的基本布局，但是用户的头像和名称并没有，我们需要通过接口调用的方式获取当前用户的资料信息")])]),t._v(" "),s("p",[s("strong",[t._v("获取用户资料接口")])]),t._v(" "),s("p",[t._v("在**"),s("code",[t._v("src/api/user.js")]),t._v("**中封装获取用户资料的方法")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n *  获取用户的基本资料\n *\n * **/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/sys/profile'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'post'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("我们忽略了一个问题！我们的headers参数并没有在这里传入，为什么呢")])]),t._v(" "),s("p",[t._v("headers中的"),s("strong",[t._v("Authorization")]),t._v("相当于我们"),s("strong",[t._v("开门")]),t._v("（"),s("strong",[t._v("调用接口")]),t._v("）时**"),s("code",[t._v("钥匙(token)")]),s("strong",[t._v("，我们在打开任何带安全权限的门的时候都需要")]),s("code",[t._v("钥匙(token)")]),t._v("** 如图")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1691),alt:"image-20200715233339927"}})]),t._v(" "),s("p",[t._v("每次在接口中携带**"),s("code",[t._v("钥匙（token）")]),t._v("**很麻烦，所以我们可以在axios拦截器中统一注入token")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1692),alt:"image-20200716000203862"}})]),t._v(" "),s("p",[s("strong",[t._v("统一注入token")]),t._v(" "),s("strong",[s("code",[t._v("src/utils/request.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在这个位置需要统一的去注入token")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果token存在 注入token")]),t._v("\n    config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Bearer ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须返回配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("： 完成获取用户资料接口和token注入")]),t._v(" "),s("h2",{attrs:{id:"封装获取用户资料的action并共享用户状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#封装获取用户资料的action并共享用户状态"}},[t._v("#")]),t._v(" 封装获取用户资料的action并共享用户状态")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("目标")])]),t._v("： 在用户的vuex模块中封装获取用户资料的action，并设置相关状态")]),t._v(" "),s("blockquote",[s("p",[t._v("用户状态会在后续的开发中，频繁用到，所以我们将用户状态同样的封装到action中")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1693),alt:"image-20200827111324564"}})]),t._v(" "),s("p",[s("strong",[t._v("封装获取用户资料action")]),t._v(" "),s("strong",[s("code",[t._v("action")])]),t._v(" "),s("strong",[s("code",[t._v("src/store/modules/user.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" login"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getUserInfo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/api/user'")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取用户资料action")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取返回值")]),t._v("\n    context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setUserInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将整个的个人信息设置到用户的vuex数据中")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里为什么要返回 为后面埋下伏笔")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("同时，配套的我们还进行了关于用户状态的mutations方法的设计")])]),t._v(" "),s("p",[s("strong",[t._v("初始化state")]),t._v(" "),s("strong",[s("code",[t._v("state")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置token初始状态   token持久化 => 放到缓存中")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("userInfo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义一个空的对象 不是null 因为后边我要开发userInfo的属性给别人用  userInfo.name")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("userInfo为什么我们不设置为null，而是设置为 {}")])]),t._v(" "),s("p",[t._v("因为我们会在**"),s("code",[t._v("getters")]),t._v("**中引用userinfo的变量，如果设置为null，则会引起异常和报错")]),t._v(" "),s("p",[s("strong",[t._v("设置和删除用户资料")]),t._v(" "),s("strong",[s("code",[t._v("mutations")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置用户信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("userInfo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用 浅拷贝的方式去赋值对象 因为这样数据更新之后，才会触发组件的更新")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除用户信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reomveUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("同学们，我们将所有的资料设置到了"),s("strong",[t._v("userInfo")]),t._v("这个对象中，如果想要取其中一个值，我们还可以在getters中建立相应的映射")])]),t._v(" "),s("p",[t._v("因为我们要做映射，如果初始值为null，一旦引用了getters，就会报错")]),t._v(" "),s("p",[s("strong",[t._v("建立用户名的映射")]),t._v(" "),s("strong",[s("code",[t._v("src/store/getters.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" getters "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sidebar")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sidebar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("device")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 建立用户名称的映射")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" getters\n\n")])])]),s("p",[t._v("到现在为止，我们将用户资料的"),s("strong",[t._v("action =>  mutation => state =>  getters")]),t._v(" 都设置好了， 那么我们应该在什么位置来调用这个action呢 ？")]),t._v(" "),s("blockquote",[s("p",[t._v("别着急，先提交代码，下个小节，我们来揭晓答案")])]),t._v(" "),s("p",[s("strong",[t._v("提交代码")])]),t._v(" "),s("p",[t._v("**"),s("code",[t._v("本节任务")]),t._v("**封装获取用户资料的action并共享用户状态")]),t._v(" "),s("h2",{attrs:{id:"权限拦截处调用获取资料action"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权限拦截处调用获取资料action"}},[t._v("#")]),t._v(" 权限拦截处调用获取资料action")]),t._v(" "),s("p",[t._v("**"),s("code",[t._v("目标")]),t._v("**在权限拦截处调用aciton")]),t._v(" "),s("h3",{attrs:{id:"权限拦截器调用action"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权限拦截器调用action"}},[t._v("#")]),t._v(" 权限拦截器调用action")]),t._v(" "),s("blockquote",[s("p",[t._v("在上小节中，我们完成了用户资料的整个流程，那么这个action在哪里调用呢？")])]),t._v(" "),s("p",[t._v("用户资料有个硬性要求，**"),s("code",[t._v("必须有token")]),t._v("**才可以获取，那么我们就可以在确定有token的位置去获取用户资料")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1694),alt:"image-20200716004526838"}})]),t._v(" "),s("blockquote",[s("p",[t._v("由上图可以看出，一旦确定我们进行了放行，就可以获取用户资料")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1695),alt:"image-20200813013009294"}})]),t._v(" "),s("p",[s("strong",[t._v("调用action")]),t._v(" "),s("strong",[s("code",[t._v("src/permission.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user/getUserInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("如果我们觉得获取用户id的方式写了太多层级，可以在vuex中的getters中设置一个映射 "),s("strong",[s("code",[t._v("src/store/getters.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("userId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userId "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 建立用户id的映射")]),t._v("\n")])])]),s("p",[t._v("代码就变成了")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果没有id这个值 才会调用 vuex的获取资料的action")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user/getUserInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为什么要写await 因为我们想获取完资料再去放行")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("此时，我们可以通过dev-tools工具在控制台清楚的看到数据已经获取")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1696),alt:"image-20200716012120619"}})]),t._v(" "),s("blockquote",[s("p",[t._v("最后一步，只需要将头部菜单中的名称换成真实的用户名即可")])]),t._v(" "),s("h3",{attrs:{id:"获取头像接口合并数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取头像接口合并数据"}},[t._v("#")]),t._v(" 获取头像接口合并数据")]),t._v(" "),s("p",[s("strong",[t._v("头像怎么办？")])]),t._v(" "),s("blockquote",[s("p",[t._v("我们发现头像并不在接口的返回体中（接口原因），我们可以通过另一个接口来获取头像，并把头像合并到当前的资料中")])]),t._v(" "),s("p",[s("strong",[t._v("封装获取用户信息接口")]),t._v(" "),s("strong",[s("code",[t._v("src/api/user.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** *\n *\n * 获取用户的基本信息  现在写它 完全是为了显示头像\n * **/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserDetailById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("/sys/user/")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("这个接口需要用户的userId，在前一个接口处，我们已经获取到了，所以可以直接在后面的内容去衔接")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" login"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getUserInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getUserDetailById "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/api/user'")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取用户资料action")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// result就是用户的基本资料")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" baseInfo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserDetailById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为了获取头像")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" baseResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("baseInfo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将两个接口结果合并")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此时已经获取到了用户的基本资料 迫不得已 为了头像再次调用一个接口")]),t._v("\n    context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setUserInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" baseResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提交mutations")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加一个点睛之笔  这里这一步，暂时用不到，但是请注意，这给我们后边会留下伏笔")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" baseResult\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("为了更好地获取头像，同样可以把头像放于getters中")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("staffPhoto")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("staffPhoto "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 建立用户头像的映射")]),t._v("\n")])])]),s("p",[t._v("此时，我们的头像和名称已经获取到了，可以直接将之前的假数据换成真正的头像和名称")]),t._v(" "),s("p",[s("strong",[t._v("用户名")]),t._v(" "),s("strong",[s("code",[t._v("layout/components/Navbar.vue")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapGetters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sidebar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'staffPhoto'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"staffPhoto"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user-avatar"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("span"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n")])])]),s("blockquote",[s("p",[t._v("通过设置，用户名已经显示，头像依然没有显示，这是因为虽然有地址，但是地址来源是私有云，目前已经失效，所以需要额外处理下图片的异常")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1697),alt:"image-20200827140451144"}})]),t._v(" "),s("p",[t._v("至于处理图片的异常，我们在下一节中，可采用自定义指令的形式来进行处理")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("：实现权限拦截处调用获取资料action")]),t._v(" "),s("h2",{attrs:{id:"自定义指令-解决异常图片情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义指令-解决异常图片情况"}},[t._v("#")]),t._v(" 自定义指令-解决异常图片情况")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("目标")])]),t._v("： 通过自定义指令的形式解决异常图片的处理")]),t._v(" "),s("h3",{attrs:{id:"自定义指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义指令"}},[t._v("#")]),t._v(" 自定义指令")]),t._v(" "),s("p",[t._v("注册自定义指令")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("Vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'指令名称'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会在当前指令作用的dom元素 插入之后执行")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// options 里面是指令的表达式")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("inserted")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("自定义指令可以采用统一的文件来管理  "),s("strong",[s("code",[t._v("src/directives/index.js")])]),t._v(",这个文件负责管理所有的自定义指令")])]),t._v(" "),s("p",[t._v("首先定义第一个自定义指令  "),s("strong",[s("code",[t._v("v-imagerror")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" imagerror "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指令对象 会在当前的dom元素插入到节点之后执行")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inserted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// options是 指令中的变量的解释  其中有一个属性叫做 value")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dom 表示当前指令作用的dom对象")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dom认为此时就是图片")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当图片有地址 但是地址没有加载成功的时候 会报错 会触发图片的一个事件 => onerror")]),t._v("\n    dom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当图片出现异常的时候 会将指令配置的默认图片设置为该图片的内容")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dom可以注册error事件")]),t._v("\n      dom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里不能写死")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"在main-js完成自定义指令全局注册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在main-js完成自定义指令全局注册"}},[t._v("#")]),t._v(" 在main.js完成自定义指令全局注册")]),t._v(" "),s("p",[t._v("然后，在**"),s("code",[t._v("main.js")]),t._v("**中完成对于该文件中所有指令的全局注册")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" directives "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/directives'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册自定义指令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 遍历所有的导出的指令对象 完成自定义全局注册")]),t._v("\nObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("directives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册自定义指令")]),t._v("\n  Vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" directives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("针对上面的引入语法  "),s("strong",[s("code",[t._v("import * as 变量")])]),t._v("  得到的是一个对象**"),s("code",[t._v("{ 变量1：对象1，变量2： 对象2 ... }")]),t._v("**, 所以可以采用对象遍历的方法进行处理")]),t._v(" "),s("p",[t._v("指令注册成功，可以在**"),s("code",[t._v("navbar.vue")]),t._v("**中直接使用了")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-imageerror")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("defaultImg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("staffPhoto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user-avatar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("defaultImg")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/./assets/common/head.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("：实现一个自定义指令，解决图片加载异常的问题")]),t._v(" "),s("h2",{attrs:{id:"实现登出功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现登出功能"}},[t._v("#")]),t._v(" 实现登出功能")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("目标")])]),t._v("：实现用户的登出操作")]),t._v(" "),s("blockquote",[s("p",[t._v("登出仅仅是跳到登录页吗？")])]),t._v(" "),s("p",[t._v("不，当然不是，我们要处理如下")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1698),alt:"image-20200827143847893"}})]),t._v(" "),s("p",[t._v("同样的，登出功能，我们在vuex中的用户模块中实现对应的"),s("strong",[t._v("action")])]),t._v(" "),s("p",[s("strong",[t._v("登出action")]),t._v(" "),s("strong",[s("code",[t._v("src/store/modules/user.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 登出的action")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除token")]),t._v("\n    context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'removeToken'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不仅仅删除了vuex中的 还删除了缓存中的")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除用户资料")]),t._v("\n    context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'removeUserInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除用户信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("头部菜单调用action")]),t._v(" "),s("strong",[s("code",[t._v("src/layout/components/Navbar.vue")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user/logout'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里不论写不写 await 登出方法都是同步的")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("/login")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳到登录")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("**"),s("code",[t._v("注意")]),t._v("**我们这里也可以采用vuex中的模块化引入辅助函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mapGetters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createNamespacedHelpers  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  mapActions "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createNamespacedHelpers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这是的mapAction直接对应模块下的action辅助函数")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("methods")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapActions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lgout'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("以上代码，实际上直接对user模块下的action进行了引用，")]),t._v(" "),s("p",[s("strong",[t._v("提交代码")])]),t._v(" "),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("： 实现登出功能")]),t._v(" "),s("h2",{attrs:{id:"token失效的主动介入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#token失效的主动介入"}},[t._v("#")]),t._v(" Token失效的主动介入")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("目标")])]),t._v("： 处理当token失效时业务")]),t._v(" "),s("h3",{attrs:{id:"主动介入token处理的业务逻辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主动介入token处理的业务逻辑"}},[t._v("#")]),t._v(" 主动介入token处理的业务逻辑")]),t._v(" "),s("blockquote",[s("p",[t._v("开门的钥匙不是一直有效的，如果一直有效，会有安全风险，所以我们尝试在客户端进行一下token的时间检查")])]),t._v(" "),s("p",[t._v("具体业务图如下")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1699),alt:"image-20200716231205153"}})]),t._v(" "),s("h3",{attrs:{id:"流程图转化代码-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程图转化代码-2"}},[t._v("#")]),t._v(" 流程图转化代码")]),t._v(" "),s("p",[s("strong",[t._v("流程图转化代码")]),t._v(" "),s("strong",[s("code",[t._v("src/utils/auth.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timeKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hrsaas-timestamp-key'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置一个独一无二的key")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取时间戳")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimeStamp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Cookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置时间戳")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeStamp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Cookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n\n")])])]),s("p",[s("strong",[s("code",[t._v("src/utils/request.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" axios "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/store'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/router'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Message "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" getTimeStamp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/utils/auth'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" TimeOut "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3600")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义超时时间")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" service "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当执行 npm run dev  => .evn.development => /api => 跨域代理")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("baseURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_BASE_API")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// npm  run dev  => /api npm run build =>  /prod-api")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置超时时间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求拦截器")]),t._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config 是请求的配置信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注入token")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有在有token的情况下 才有必要去检查时间戳是否超时")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IsCheckTimeOut")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果它为true表示 过期了")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// token没用了 因为超时了")]),t._v("\n      store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user/logout'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 登出操作")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳转到登录页")]),t._v("\n      router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token超时了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Bearer ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须要返回的")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 响应拦截器")]),t._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// axios默认加了一层data")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   要根据success的成功与否决定下面的操作")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" data\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 业务已经错误了 还能进then ? 不能 ！ 应该进catch")]),t._v("\n    Message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提示错误消息")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提示错误信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回执行错误 让当前的执行链跳出成功 直接进入 catch")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否超时")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 超时逻辑  (当前时间  - 缓存中的时间) 是否大于 时间差")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IsCheckTimeOut")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" currentTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前时间戳")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" timeStamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimeStamp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 缓存时间戳")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" timeStamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" TimeOut\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" service\n\n")])])]),s("p",[s("strong",[s("code",[t._v("本节注意")])]),t._v("：我们在调用登录接口的时候 一定是没有token的，所以token检查不会影响登录接口的调用")]),t._v(" "),s("blockquote",[s("p",[t._v("同理，在登录的时候，如果登录成功，我们应该设置时间戳")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义login action  也需要参数 调用action时 传递过来的参数")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// async 标记的函数其实就是一个异步函数 -> 本质是还是 一个promise")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 经过响应拦截器的处理之后 这里的result实际上就是 token")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实际上就是一个promise  result就是执行的结果")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// axios默认给数据加了一层data")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 表示登录接口调用成功 也就是意味着你的用户名和密码是正确的")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 现在有用户token")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// actions 修改state 必须通过mutations")]),t._v("\n    context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setToken'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写入时间戳")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeStamp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将当前的最新时间写入缓存")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("提交代码")])]),t._v(" "),s("blockquote",[s("p",[t._v("有主动处理就有被动处理，也就是后端告诉我们超时了，我们被迫做出反应，如果后端接口没有做处理，主动介入就是一种简单的方式")])]),t._v(" "),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("：完成token超时的主动介入")]),t._v(" "),s("h2",{attrs:{id:"token失效的被动处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#token失效的被动处理"}},[t._v("#")]),t._v(" Token失效的被动处理")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("目标")])]),t._v("： 实现token失效的被动处理")]),t._v(" "),s("blockquote",[s("p",[t._v("除了token的主动介入之外，我们还可以对token进行被动的处理，如图")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(1700),alt:"image-20200818155842864"}})]),t._v(" "),s("p",[t._v("token超时的错误码是**"),s("code",[t._v("10002")]),t._v("**")]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v(" "),s("strong",[s("code",[t._v("src/utils/request.js")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// error 信息 里面 response的对象")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10002")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当等于10002的时候 表示 后端告诉我token超时了")]),t._v("\n    store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user/logout'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 登出action 删除token")]),t._v("\n    router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提示错误信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("无论是主动介入还是被动处理，这些操作都是为了更好地处理token，减少错误异常的可能性")])]),t._v(" "),s("p",[s("strong",[s("code",[t._v("本节任务")])]),t._v("  Token失效的被动处理")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("本章节我们一步步实现了如下的效果")]),t._v(" "),s("p",[s("img",{attrs:{src:a(397),alt:"image-20200716015113164"}})]),t._v(" "),s("p",[t._v("实际的业务走向")]),t._v(" "),s("p",[s("img",{attrs:{src:a(1701),alt:"image-20200827152601712"}})]),t._v(" "),s("p",[t._v("实际上，我们的主页功能有一个重要的**"),s("code",[t._v("角色权限")]),t._v("**功能还没有完成，此功能等到我们完成基本业务之后再进行展开")]),t._v(" "),s("p",[t._v("中台大型后端平台的深入是一个**"),s("code",[t._v("抽丝剥茧")]),t._v("**的过程，循序渐进的明白每一步的操作是非常关键的。")])])}),[],!1,null,null,null);s.default=e.exports},397:function(t,s,a){t.exports=a.p+"assets/img/image-20200716015113164.e5562c69.png"}}]);